{"ast":null,"code":"'use strict';\n\nvar Color = require('../../components/color');\n\nvar Template = require('../../plot_api/plot_template');\n\nvar Lib = require('../../lib');\n\nvar handleSubplotDefaults = require('../subplot_defaults');\n\nvar handleTickLabelDefaults = require('../cartesian/tick_label_defaults');\n\nvar handleTickMarkDefaults = require('../cartesian/tick_mark_defaults');\n\nvar handleTickValueDefaults = require('../cartesian/tick_value_defaults');\n\nvar handleLineGridDefaults = require('../cartesian/line_grid_defaults');\n\nvar layoutAttributes = require('./layout_attributes');\n\nvar axesNames = ['aaxis', 'baxis', 'caxis'];\n\nmodule.exports = function supplyLayoutDefaults(layoutIn, layoutOut, fullData) {\n  handleSubplotDefaults(layoutIn, layoutOut, fullData, {\n    type: 'ternary',\n    attributes: layoutAttributes,\n    handleDefaults: handleTernaryDefaults,\n    font: layoutOut.font,\n    paper_bgcolor: layoutOut.paper_bgcolor\n  });\n};\n\nfunction handleTernaryDefaults(ternaryLayoutIn, ternaryLayoutOut, coerce, options) {\n  var bgColor = coerce('bgcolor');\n  var sum = coerce('sum');\n  options.bgColor = Color.combine(bgColor, options.paper_bgcolor);\n  var axName, containerIn, containerOut; // TODO: allow most (if not all) axis attributes to be set\n  // in the outer container and used as defaults in the individual axes?\n\n  for (var j = 0; j < axesNames.length; j++) {\n    axName = axesNames[j];\n    containerIn = ternaryLayoutIn[axName] || {};\n    containerOut = Template.newContainer(ternaryLayoutOut, axName);\n    containerOut._name = axName;\n    handleAxisDefaults(containerIn, containerOut, options, ternaryLayoutOut);\n  } // if the min values contradict each other, set them all to default (0)\n  // and delete *all* the inputs so the user doesn't get confused later by\n  // changing one and having them all change.\n\n\n  var aaxis = ternaryLayoutOut.aaxis;\n  var baxis = ternaryLayoutOut.baxis;\n  var caxis = ternaryLayoutOut.caxis;\n\n  if (aaxis.min + baxis.min + caxis.min >= sum) {\n    aaxis.min = 0;\n    baxis.min = 0;\n    caxis.min = 0;\n    if (ternaryLayoutIn.aaxis) delete ternaryLayoutIn.aaxis.min;\n    if (ternaryLayoutIn.baxis) delete ternaryLayoutIn.baxis.min;\n    if (ternaryLayoutIn.caxis) delete ternaryLayoutIn.caxis.min;\n  }\n}\n\nfunction handleAxisDefaults(containerIn, containerOut, options, ternaryLayoutOut) {\n  var axAttrs = layoutAttributes[containerOut._name];\n\n  function coerce(attr, dflt) {\n    return Lib.coerce(containerIn, containerOut, axAttrs, attr, dflt);\n  }\n\n  coerce('uirevision', ternaryLayoutOut.uirevision);\n  containerOut.type = 'linear'; // no other types allowed for ternary\n\n  var dfltColor = coerce('color'); // if axis.color was provided, use it for fonts too; otherwise,\n  // inherit from global font color in case that was provided.\n\n  var dfltFontColor = dfltColor !== axAttrs.color.dflt ? dfltColor : options.font.color;\n  var axName = containerOut._name;\n  var letterUpper = axName.charAt(0).toUpperCase();\n  var dfltTitle = 'Component ' + letterUpper;\n  var title = coerce('title.text', dfltTitle);\n  containerOut._hovertitle = title === dfltTitle ? title : letterUpper;\n  Lib.coerceFont(coerce, 'title.font', {\n    family: options.font.family,\n    size: Lib.bigFont(options.font.size),\n    color: dfltFontColor\n  }); // range is just set by 'min' - max is determined by the other axes mins\n\n  coerce('min');\n  handleTickValueDefaults(containerIn, containerOut, coerce, 'linear');\n  handleTickLabelDefaults(containerIn, containerOut, coerce, 'linear', {});\n  handleTickMarkDefaults(containerIn, containerOut, coerce, {\n    outerTicks: true\n  });\n  var showTickLabels = coerce('showticklabels');\n\n  if (showTickLabels) {\n    Lib.coerceFont(coerce, 'tickfont', {\n      family: options.font.family,\n      size: options.font.size,\n      color: dfltFontColor\n    });\n    coerce('tickangle');\n    coerce('tickformat');\n  }\n\n  handleLineGridDefaults(containerIn, containerOut, coerce, {\n    dfltColor: dfltColor,\n    bgColor: options.bgColor,\n    // default grid color is darker here (60%, vs cartesian default ~91%)\n    // because the grid is not square so the eye needs heavier cues to follow\n    blend: 60,\n    showLine: true,\n    showGrid: true,\n    noZeroLine: true,\n    attributes: axAttrs\n  });\n  coerce('hoverformat');\n  coerce('layer');\n}","map":{"version":3,"sources":["C:/Projects/reactApp/analyse_coderhub/node_modules/plotly.js/src/plots/ternary/layout_defaults.js"],"names":["Color","require","Template","Lib","handleSubplotDefaults","handleTickLabelDefaults","handleTickMarkDefaults","handleTickValueDefaults","handleLineGridDefaults","layoutAttributes","axesNames","module","exports","supplyLayoutDefaults","layoutIn","layoutOut","fullData","type","attributes","handleDefaults","handleTernaryDefaults","font","paper_bgcolor","ternaryLayoutIn","ternaryLayoutOut","coerce","options","bgColor","sum","combine","axName","containerIn","containerOut","j","length","newContainer","_name","handleAxisDefaults","aaxis","baxis","caxis","min","axAttrs","attr","dflt","uirevision","dfltColor","dfltFontColor","color","letterUpper","charAt","toUpperCase","dfltTitle","title","_hovertitle","coerceFont","family","size","bigFont","outerTicks","showTickLabels","blend","showLine","showGrid","noZeroLine"],"mappings":"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","sourcesContent":["'use strict';\n\nvar Color = require('../../components/color');\nvar Template = require('../../plot_api/plot_template');\nvar Lib = require('../../lib');\n\nvar handleSubplotDefaults = require('../subplot_defaults');\nvar handleTickLabelDefaults = require('../cartesian/tick_label_defaults');\nvar handleTickMarkDefaults = require('../cartesian/tick_mark_defaults');\nvar handleTickValueDefaults = require('../cartesian/tick_value_defaults');\nvar handleLineGridDefaults = require('../cartesian/line_grid_defaults');\nvar layoutAttributes = require('./layout_attributes');\n\nvar axesNames = ['aaxis', 'baxis', 'caxis'];\n\nmodule.exports = function supplyLayoutDefaults(layoutIn, layoutOut, fullData) {\n    handleSubplotDefaults(layoutIn, layoutOut, fullData, {\n        type: 'ternary',\n        attributes: layoutAttributes,\n        handleDefaults: handleTernaryDefaults,\n        font: layoutOut.font,\n        paper_bgcolor: layoutOut.paper_bgcolor\n    });\n};\n\nfunction handleTernaryDefaults(ternaryLayoutIn, ternaryLayoutOut, coerce, options) {\n    var bgColor = coerce('bgcolor');\n    var sum = coerce('sum');\n    options.bgColor = Color.combine(bgColor, options.paper_bgcolor);\n    var axName, containerIn, containerOut;\n\n    // TODO: allow most (if not all) axis attributes to be set\n    // in the outer container and used as defaults in the individual axes?\n\n    for(var j = 0; j < axesNames.length; j++) {\n        axName = axesNames[j];\n        containerIn = ternaryLayoutIn[axName] || {};\n        containerOut = Template.newContainer(ternaryLayoutOut, axName);\n        containerOut._name = axName;\n\n        handleAxisDefaults(containerIn, containerOut, options, ternaryLayoutOut);\n    }\n\n    // if the min values contradict each other, set them all to default (0)\n    // and delete *all* the inputs so the user doesn't get confused later by\n    // changing one and having them all change.\n    var aaxis = ternaryLayoutOut.aaxis;\n    var baxis = ternaryLayoutOut.baxis;\n    var caxis = ternaryLayoutOut.caxis;\n    if(aaxis.min + baxis.min + caxis.min >= sum) {\n        aaxis.min = 0;\n        baxis.min = 0;\n        caxis.min = 0;\n        if(ternaryLayoutIn.aaxis) delete ternaryLayoutIn.aaxis.min;\n        if(ternaryLayoutIn.baxis) delete ternaryLayoutIn.baxis.min;\n        if(ternaryLayoutIn.caxis) delete ternaryLayoutIn.caxis.min;\n    }\n}\n\nfunction handleAxisDefaults(containerIn, containerOut, options, ternaryLayoutOut) {\n    var axAttrs = layoutAttributes[containerOut._name];\n\n    function coerce(attr, dflt) {\n        return Lib.coerce(containerIn, containerOut, axAttrs, attr, dflt);\n    }\n\n    coerce('uirevision', ternaryLayoutOut.uirevision);\n\n    containerOut.type = 'linear'; // no other types allowed for ternary\n\n    var dfltColor = coerce('color');\n    // if axis.color was provided, use it for fonts too; otherwise,\n    // inherit from global font color in case that was provided.\n    var dfltFontColor = (dfltColor !== axAttrs.color.dflt) ? dfltColor : options.font.color;\n\n    var axName = containerOut._name;\n    var letterUpper = axName.charAt(0).toUpperCase();\n    var dfltTitle = 'Component ' + letterUpper;\n\n    var title = coerce('title.text', dfltTitle);\n    containerOut._hovertitle = title === dfltTitle ? title : letterUpper;\n\n    Lib.coerceFont(coerce, 'title.font', {\n        family: options.font.family,\n        size: Lib.bigFont(options.font.size),\n        color: dfltFontColor\n    });\n\n    // range is just set by 'min' - max is determined by the other axes mins\n    coerce('min');\n\n    handleTickValueDefaults(containerIn, containerOut, coerce, 'linear');\n    handleTickLabelDefaults(containerIn, containerOut, coerce, 'linear', {});\n    handleTickMarkDefaults(containerIn, containerOut, coerce,\n        { outerTicks: true });\n\n    var showTickLabels = coerce('showticklabels');\n    if(showTickLabels) {\n        Lib.coerceFont(coerce, 'tickfont', {\n            family: options.font.family,\n            size: options.font.size,\n            color: dfltFontColor\n        });\n        coerce('tickangle');\n        coerce('tickformat');\n    }\n\n    handleLineGridDefaults(containerIn, containerOut, coerce, {\n        dfltColor: dfltColor,\n        bgColor: options.bgColor,\n        // default grid color is darker here (60%, vs cartesian default ~91%)\n        // because the grid is not square so the eye needs heavier cues to follow\n        blend: 60,\n        showLine: true,\n        showGrid: true,\n        noZeroLine: true,\n        attributes: axAttrs\n    });\n\n    coerce('hoverformat');\n    coerce('layer');\n}\n"]},"metadata":{},"sourceType":"script"}