{"ast":null,"code":"'use strict';\n\nvar Lib = require('../../lib');\n\nvar attributes = require('./attributes');\n\nvar Color = require('../../components/color');\n\nvar tinycolor = require('tinycolor2');\n\nvar handleDomainDefaults = require('../../plots/domain').defaults;\n\nvar handleHoverLabelDefaults = require('../../components/fx/hoverlabel_defaults');\n\nvar Template = require('../../plot_api/plot_template');\n\nvar handleArrayContainerDefaults = require('../../plots/array_container_defaults');\n\nmodule.exports = function supplyDefaults(traceIn, traceOut, defaultColor, layout) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(traceIn, traceOut, attributes, attr, dflt);\n  }\n\n  var hoverlabelDefault = Lib.extendDeep(layout.hoverlabel, traceIn.hoverlabel); // node attributes\n\n  var nodeIn = traceIn.node;\n  var nodeOut = Template.newContainer(traceOut, 'node');\n\n  function coerceNode(attr, dflt) {\n    return Lib.coerce(nodeIn, nodeOut, attributes.node, attr, dflt);\n  }\n\n  coerceNode('label');\n  coerceNode('groups');\n  coerceNode('x');\n  coerceNode('y');\n  coerceNode('pad');\n  coerceNode('thickness');\n  coerceNode('line.color');\n  coerceNode('line.width');\n  coerceNode('hoverinfo', traceIn.hoverinfo);\n  handleHoverLabelDefaults(nodeIn, nodeOut, coerceNode, hoverlabelDefault);\n  coerceNode('hovertemplate');\n  var colors = layout.colorway;\n\n  var defaultNodePalette = function (i) {\n    return colors[i % colors.length];\n  };\n\n  coerceNode('color', nodeOut.label.map(function (d, i) {\n    return Color.addOpacity(defaultNodePalette(i), 0.8);\n  }));\n  coerceNode('customdata'); // link attributes\n\n  var linkIn = traceIn.link || {};\n  var linkOut = Template.newContainer(traceOut, 'link');\n\n  function coerceLink(attr, dflt) {\n    return Lib.coerce(linkIn, linkOut, attributes.link, attr, dflt);\n  }\n\n  coerceLink('label');\n  coerceLink('source');\n  coerceLink('target');\n  coerceLink('value');\n  coerceLink('line.color');\n  coerceLink('line.width');\n  coerceLink('hoverinfo', traceIn.hoverinfo);\n  handleHoverLabelDefaults(linkIn, linkOut, coerceLink, hoverlabelDefault);\n  coerceLink('hovertemplate');\n  var defaultLinkColor = tinycolor(layout.paper_bgcolor).getLuminance() < 0.333 ? 'rgba(255, 255, 255, 0.6)' : 'rgba(0, 0, 0, 0.2)';\n  coerceLink('color', Lib.repeat(defaultLinkColor, linkOut.value.length));\n  coerceLink('customdata');\n  handleArrayContainerDefaults(linkIn, linkOut, {\n    name: 'colorscales',\n    handleItemDefaults: concentrationscalesDefaults\n  });\n  handleDomainDefaults(traceOut, layout, coerce);\n  coerce('orientation');\n  coerce('valueformat');\n  coerce('valuesuffix');\n  var dfltArrangement;\n\n  if (nodeOut.x.length && nodeOut.y.length) {\n    dfltArrangement = 'freeform';\n  }\n\n  coerce('arrangement', dfltArrangement);\n  Lib.coerceFont(coerce, 'textfont', Lib.extendFlat({}, layout.font)); // disable 1D transforms - arrays here are 1D but their lengths/meanings\n  // don't match, between nodes and links\n\n  traceOut._length = null;\n};\n\nfunction concentrationscalesDefaults(In, Out) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(In, Out, attributes.link.colorscales, attr, dflt);\n  }\n\n  coerce('label');\n  coerce('cmin');\n  coerce('cmax');\n  coerce('colorscale');\n}","map":{"version":3,"sources":["C:/Projects/reactApp/analyse_coderhub/node_modules/plotly.js/src/traces/sankey/defaults.js"],"names":["Lib","require","attributes","Color","tinycolor","handleDomainDefaults","defaults","handleHoverLabelDefaults","Template","handleArrayContainerDefaults","module","exports","supplyDefaults","traceIn","traceOut","defaultColor","layout","coerce","attr","dflt","hoverlabelDefault","extendDeep","hoverlabel","nodeIn","node","nodeOut","newContainer","coerceNode","hoverinfo","colors","colorway","defaultNodePalette","i","length","label","map","d","addOpacity","linkIn","link","linkOut","coerceLink","defaultLinkColor","paper_bgcolor","getLuminance","repeat","value","name","handleItemDefaults","concentrationscalesDefaults","dfltArrangement","x","y","coerceFont","extendFlat","font","_length","In","Out","colorscales"],"mappings":"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","sourcesContent":["'use strict';\n\nvar Lib = require('../../lib');\nvar attributes = require('./attributes');\nvar Color = require('../../components/color');\nvar tinycolor = require('tinycolor2');\nvar handleDomainDefaults = require('../../plots/domain').defaults;\nvar handleHoverLabelDefaults = require('../../components/fx/hoverlabel_defaults');\nvar Template = require('../../plot_api/plot_template');\nvar handleArrayContainerDefaults = require('../../plots/array_container_defaults');\n\nmodule.exports = function supplyDefaults(traceIn, traceOut, defaultColor, layout) {\n    function coerce(attr, dflt) {\n        return Lib.coerce(traceIn, traceOut, attributes, attr, dflt);\n    }\n\n    var hoverlabelDefault = Lib.extendDeep(layout.hoverlabel, traceIn.hoverlabel);\n\n    // node attributes\n    var nodeIn = traceIn.node;\n    var nodeOut = Template.newContainer(traceOut, 'node');\n\n    function coerceNode(attr, dflt) {\n        return Lib.coerce(nodeIn, nodeOut, attributes.node, attr, dflt);\n    }\n    coerceNode('label');\n    coerceNode('groups');\n    coerceNode('x');\n    coerceNode('y');\n    coerceNode('pad');\n    coerceNode('thickness');\n    coerceNode('line.color');\n    coerceNode('line.width');\n    coerceNode('hoverinfo', traceIn.hoverinfo);\n    handleHoverLabelDefaults(nodeIn, nodeOut, coerceNode, hoverlabelDefault);\n    coerceNode('hovertemplate');\n\n    var colors = layout.colorway;\n\n    var defaultNodePalette = function(i) {return colors[i % colors.length];};\n\n    coerceNode('color', nodeOut.label.map(function(d, i) {\n        return Color.addOpacity(defaultNodePalette(i), 0.8);\n    }));\n    coerceNode('customdata');\n\n    // link attributes\n    var linkIn = traceIn.link || {};\n    var linkOut = Template.newContainer(traceOut, 'link');\n\n    function coerceLink(attr, dflt) {\n        return Lib.coerce(linkIn, linkOut, attributes.link, attr, dflt);\n    }\n    coerceLink('label');\n    coerceLink('source');\n    coerceLink('target');\n    coerceLink('value');\n    coerceLink('line.color');\n    coerceLink('line.width');\n    coerceLink('hoverinfo', traceIn.hoverinfo);\n    handleHoverLabelDefaults(linkIn, linkOut, coerceLink, hoverlabelDefault);\n    coerceLink('hovertemplate');\n\n    var defaultLinkColor = tinycolor(layout.paper_bgcolor).getLuminance() < 0.333 ?\n                'rgba(255, 255, 255, 0.6)' :\n                'rgba(0, 0, 0, 0.2)';\n\n    coerceLink('color', Lib.repeat(defaultLinkColor, linkOut.value.length));\n    coerceLink('customdata');\n\n    handleArrayContainerDefaults(linkIn, linkOut, {\n        name: 'colorscales',\n        handleItemDefaults: concentrationscalesDefaults\n    });\n\n    handleDomainDefaults(traceOut, layout, coerce);\n\n    coerce('orientation');\n    coerce('valueformat');\n    coerce('valuesuffix');\n\n    var dfltArrangement;\n    if(nodeOut.x.length && nodeOut.y.length) {\n        dfltArrangement = 'freeform';\n    }\n    coerce('arrangement', dfltArrangement);\n\n    Lib.coerceFont(coerce, 'textfont', Lib.extendFlat({}, layout.font));\n\n    // disable 1D transforms - arrays here are 1D but their lengths/meanings\n    // don't match, between nodes and links\n    traceOut._length = null;\n};\n\nfunction concentrationscalesDefaults(In, Out) {\n    function coerce(attr, dflt) {\n        return Lib.coerce(In, Out, attributes.link.colorscales, attr, dflt);\n    }\n\n    coerce('label');\n    coerce('cmin');\n    coerce('cmax');\n    coerce('colorscale');\n}\n"]},"metadata":{},"sourceType":"script"}