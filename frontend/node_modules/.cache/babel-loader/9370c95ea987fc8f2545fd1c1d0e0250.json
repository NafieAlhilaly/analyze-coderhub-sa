{"ast":null,"code":"'use strict';\n\nvar Lib = require('../../lib');\n\nvar Axes = require('../../plots/cartesian/axes');\n\nvar alignPeriod = require('../../plots/cartesian/align_period');\n\nvar calcCommon = require('../ohlc/calc').calcCommon;\n\nmodule.exports = function (gd, trace) {\n  var fullLayout = gd._fullLayout;\n  var xa = Axes.getFromId(gd, trace.xaxis);\n  var ya = Axes.getFromId(gd, trace.yaxis);\n  var origX = xa.makeCalcdata(trace, 'x');\n  var x = alignPeriod(trace, xa, 'x', origX).vals;\n  var cd = calcCommon(gd, trace, origX, x, ya, ptFunc);\n\n  if (cd.length) {\n    Lib.extendFlat(cd[0].t, {\n      num: fullLayout._numBoxes,\n      dPos: Lib.distinctVals(x).minDiff / 2,\n      posLetter: 'x',\n      valLetter: 'y'\n    });\n    fullLayout._numBoxes++;\n    return cd;\n  } else {\n    return [{\n      t: {\n        empty: true\n      }\n    }];\n  }\n};\n\nfunction ptFunc(o, h, l, c) {\n  return {\n    min: l,\n    q1: Math.min(o, c),\n    med: c,\n    q3: Math.max(o, c),\n    max: h\n  };\n}","map":{"version":3,"sources":["C:/Projects/reactApp/analyse_coderhub/node_modules/plotly.js/src/traces/candlestick/calc.js"],"names":["Lib","require","Axes","alignPeriod","calcCommon","module","exports","gd","trace","fullLayout","_fullLayout","xa","getFromId","xaxis","ya","yaxis","origX","makeCalcdata","x","vals","cd","ptFunc","length","extendFlat","t","num","_numBoxes","dPos","distinctVals","minDiff","posLetter","valLetter","empty","o","h","l","c","min","q1","Math","med","q3","max"],"mappings":"AAAA;;AAEA,IAAIA,GAAG,GAAGC,OAAO,CAAC,WAAD,CAAjB;;AACA,IAAIC,IAAI,GAAGD,OAAO,CAAC,4BAAD,CAAlB;;AACA,IAAIE,WAAW,GAAGF,OAAO,CAAC,oCAAD,CAAzB;;AAEA,IAAIG,UAAU,GAAGH,OAAO,CAAC,cAAD,CAAP,CAAwBG,UAAzC;;AAEAC,MAAM,CAACC,OAAP,GAAiB,UAASC,EAAT,EAAaC,KAAb,EAAoB;AACjC,MAAIC,UAAU,GAAGF,EAAE,CAACG,WAApB;AACA,MAAIC,EAAE,GAAGT,IAAI,CAACU,SAAL,CAAeL,EAAf,EAAmBC,KAAK,CAACK,KAAzB,CAAT;AACA,MAAIC,EAAE,GAAGZ,IAAI,CAACU,SAAL,CAAeL,EAAf,EAAmBC,KAAK,CAACO,KAAzB,CAAT;AAEA,MAAIC,KAAK,GAAGL,EAAE,CAACM,YAAH,CAAgBT,KAAhB,EAAuB,GAAvB,CAAZ;AACA,MAAIU,CAAC,GAAGf,WAAW,CAACK,KAAD,EAAQG,EAAR,EAAY,GAAZ,EAAiBK,KAAjB,CAAX,CAAmCG,IAA3C;AAEA,MAAIC,EAAE,GAAGhB,UAAU,CAACG,EAAD,EAAKC,KAAL,EAAYQ,KAAZ,EAAmBE,CAAnB,EAAsBJ,EAAtB,EAA0BO,MAA1B,CAAnB;;AAEA,MAAGD,EAAE,CAACE,MAAN,EAAc;AACVtB,IAAAA,GAAG,CAACuB,UAAJ,CAAeH,EAAE,CAAC,CAAD,CAAF,CAAMI,CAArB,EAAwB;AACpBC,MAAAA,GAAG,EAAEhB,UAAU,CAACiB,SADI;AAEpBC,MAAAA,IAAI,EAAE3B,GAAG,CAAC4B,YAAJ,CAAiBV,CAAjB,EAAoBW,OAApB,GAA8B,CAFhB;AAGpBC,MAAAA,SAAS,EAAE,GAHS;AAIpBC,MAAAA,SAAS,EAAE;AAJS,KAAxB;AAOAtB,IAAAA,UAAU,CAACiB,SAAX;AACA,WAAON,EAAP;AACH,GAVD,MAUO;AACH,WAAO,CAAC;AAACI,MAAAA,CAAC,EAAE;AAACQ,QAAAA,KAAK,EAAE;AAAR;AAAJ,KAAD,CAAP;AACH;AACJ,CAvBD;;AAyBA,SAASX,MAAT,CAAgBY,CAAhB,EAAmBC,CAAnB,EAAsBC,CAAtB,EAAyBC,CAAzB,EAA4B;AACxB,SAAO;AACHC,IAAAA,GAAG,EAAEF,CADF;AAEHG,IAAAA,EAAE,EAAEC,IAAI,CAACF,GAAL,CAASJ,CAAT,EAAYG,CAAZ,CAFD;AAGHI,IAAAA,GAAG,EAAEJ,CAHF;AAIHK,IAAAA,EAAE,EAAEF,IAAI,CAACG,GAAL,CAAST,CAAT,EAAYG,CAAZ,CAJD;AAKHM,IAAAA,GAAG,EAAER;AALF,GAAP;AAOH","sourcesContent":["'use strict';\n\nvar Lib = require('../../lib');\nvar Axes = require('../../plots/cartesian/axes');\nvar alignPeriod = require('../../plots/cartesian/align_period');\n\nvar calcCommon = require('../ohlc/calc').calcCommon;\n\nmodule.exports = function(gd, trace) {\n    var fullLayout = gd._fullLayout;\n    var xa = Axes.getFromId(gd, trace.xaxis);\n    var ya = Axes.getFromId(gd, trace.yaxis);\n\n    var origX = xa.makeCalcdata(trace, 'x');\n    var x = alignPeriod(trace, xa, 'x', origX).vals;\n\n    var cd = calcCommon(gd, trace, origX, x, ya, ptFunc);\n\n    if(cd.length) {\n        Lib.extendFlat(cd[0].t, {\n            num: fullLayout._numBoxes,\n            dPos: Lib.distinctVals(x).minDiff / 2,\n            posLetter: 'x',\n            valLetter: 'y',\n        });\n\n        fullLayout._numBoxes++;\n        return cd;\n    } else {\n        return [{t: {empty: true}}];\n    }\n};\n\nfunction ptFunc(o, h, l, c) {\n    return {\n        min: l,\n        q1: Math.min(o, c),\n        med: c,\n        q3: Math.max(o, c),\n        max: h,\n    };\n}\n"]},"metadata":{},"sourceType":"script"}