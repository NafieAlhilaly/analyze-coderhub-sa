{"ast":null,"code":"'use strict';\n\nmodule.exports = measure;\nmeasure.canvas = document.createElement('canvas');\nmeasure.cache = {};\n\nfunction measure(font, o) {\n  if (!o) o = {};\n\n  if (typeof font === 'string' || Array.isArray(font)) {\n    o.family = font;\n  }\n\n  var family = Array.isArray(o.family) ? o.family.join(', ') : o.family;\n  if (!family) throw Error('`family` must be defined');\n  var fs = o.size || o.fontSize || o.em || 48;\n  var weight = o.weight || o.fontWeight || '';\n  var style = o.style || o.fontStyle || '';\n  var font = [style, weight, fs].join(' ') + 'px ' + family;\n  var origin = o.origin || 'top';\n\n  if (measure.cache[family]) {\n    // return more precise values if cache has them\n    if (fs <= measure.cache[family].em) {\n      return applyOrigin(measure.cache[family], origin);\n    }\n  }\n\n  var canvas = o.canvas || measure.canvas;\n  var ctx = canvas.getContext('2d');\n  var chars = {\n    upper: o.upper !== undefined ? o.upper : 'H',\n    lower: o.lower !== undefined ? o.lower : 'x',\n    descent: o.descent !== undefined ? o.descent : 'p',\n    ascent: o.ascent !== undefined ? o.ascent : 'h',\n    tittle: o.tittle !== undefined ? o.tittle : 'i',\n    overshoot: o.overshoot !== undefined ? o.overshoot : 'O'\n  };\n  var l = Math.ceil(fs * 1.5);\n  canvas.height = l;\n  canvas.width = l * .5;\n  ctx.font = font;\n  var char = 'H';\n  var result = {\n    top: 0\n  }; // measure line-height\n\n  ctx.clearRect(0, 0, l, l);\n  ctx.textBaseline = 'top';\n  ctx.fillStyle = 'black';\n  ctx.fillText(char, 0, 0);\n  var topPx = firstTop(ctx.getImageData(0, 0, l, l));\n  ctx.clearRect(0, 0, l, l);\n  ctx.textBaseline = 'bottom';\n  ctx.fillText(char, 0, l);\n  var bottomPx = firstTop(ctx.getImageData(0, 0, l, l));\n  result.lineHeight = result.bottom = l - bottomPx + topPx; // measure baseline\n\n  ctx.clearRect(0, 0, l, l);\n  ctx.textBaseline = 'alphabetic';\n  ctx.fillText(char, 0, l);\n  var baselinePx = firstTop(ctx.getImageData(0, 0, l, l));\n  var baseline = l - baselinePx - 1 + topPx;\n  result.baseline = result.alphabetic = baseline; // measure median\n\n  ctx.clearRect(0, 0, l, l);\n  ctx.textBaseline = 'middle';\n  ctx.fillText(char, 0, l * .5);\n  var medianPx = firstTop(ctx.getImageData(0, 0, l, l));\n  result.median = result.middle = l - medianPx - 1 + topPx - l * .5; // measure hanging\n\n  ctx.clearRect(0, 0, l, l);\n  ctx.textBaseline = 'hanging';\n  ctx.fillText(char, 0, l * .5);\n  var hangingPx = firstTop(ctx.getImageData(0, 0, l, l));\n  result.hanging = l - hangingPx - 1 + topPx - l * .5; // measure ideographic\n\n  ctx.clearRect(0, 0, l, l);\n  ctx.textBaseline = 'ideographic';\n  ctx.fillText(char, 0, l);\n  var ideographicPx = firstTop(ctx.getImageData(0, 0, l, l));\n  result.ideographic = l - ideographicPx - 1 + topPx; // measure cap\n\n  if (chars.upper) {\n    ctx.clearRect(0, 0, l, l);\n    ctx.textBaseline = 'top';\n    ctx.fillText(chars.upper, 0, 0);\n    result.upper = firstTop(ctx.getImageData(0, 0, l, l));\n    result.capHeight = result.baseline - result.upper;\n  } // measure x\n\n\n  if (chars.lower) {\n    ctx.clearRect(0, 0, l, l);\n    ctx.textBaseline = 'top';\n    ctx.fillText(chars.lower, 0, 0);\n    result.lower = firstTop(ctx.getImageData(0, 0, l, l));\n    result.xHeight = result.baseline - result.lower;\n  } // measure tittle\n\n\n  if (chars.tittle) {\n    ctx.clearRect(0, 0, l, l);\n    ctx.textBaseline = 'top';\n    ctx.fillText(chars.tittle, 0, 0);\n    result.tittle = firstTop(ctx.getImageData(0, 0, l, l));\n  } // measure ascent\n\n\n  if (chars.ascent) {\n    ctx.clearRect(0, 0, l, l);\n    ctx.textBaseline = 'top';\n    ctx.fillText(chars.ascent, 0, 0);\n    result.ascent = firstTop(ctx.getImageData(0, 0, l, l));\n  } // measure descent\n\n\n  if (chars.descent) {\n    ctx.clearRect(0, 0, l, l);\n    ctx.textBaseline = 'top';\n    ctx.fillText(chars.descent, 0, 0);\n    result.descent = firstBottom(ctx.getImageData(0, 0, l, l));\n  } // measure overshoot\n\n\n  if (chars.overshoot) {\n    ctx.clearRect(0, 0, l, l);\n    ctx.textBaseline = 'top';\n    ctx.fillText(chars.overshoot, 0, 0);\n    var overshootPx = firstBottom(ctx.getImageData(0, 0, l, l));\n    result.overshoot = overshootPx - baseline;\n  } // normalize result\n\n\n  for (var name in result) {\n    result[name] /= fs;\n  }\n\n  result.em = fs;\n  measure.cache[family] = result;\n  return applyOrigin(result, origin);\n}\n\nfunction applyOrigin(obj, origin) {\n  var res = {};\n  if (typeof origin === 'string') origin = obj[origin];\n\n  for (var name in obj) {\n    if (name === 'em') continue;\n    res[name] = obj[name] - origin;\n  }\n\n  return res;\n}\n\nfunction firstTop(iData) {\n  var l = iData.height;\n  var data = iData.data;\n\n  for (var i = 3; i < data.length; i += 4) {\n    if (data[i] !== 0) {\n      return Math.floor((i - 3) * .25 / l);\n    }\n  }\n}\n\nfunction firstBottom(iData) {\n  var l = iData.height;\n  var data = iData.data;\n\n  for (var i = data.length - 1; i > 0; i -= 4) {\n    if (data[i] !== 0) {\n      return Math.floor((i - 3) * .25 / l);\n    }\n  }\n}","map":{"version":3,"sources":["C:/Projects/reactApp/analyse_coderhub/node_modules/font-measure/index.js"],"names":["module","exports","measure","canvas","document","createElement","cache","font","o","Array","isArray","family","join","Error","fs","size","fontSize","em","weight","fontWeight","style","fontStyle","origin","applyOrigin","ctx","getContext","chars","upper","undefined","lower","descent","ascent","tittle","overshoot","l","Math","ceil","height","width","char","result","top","clearRect","textBaseline","fillStyle","fillText","topPx","firstTop","getImageData","bottomPx","lineHeight","bottom","baselinePx","baseline","alphabetic","medianPx","median","middle","hangingPx","hanging","ideographicPx","ideographic","capHeight","xHeight","firstBottom","overshootPx","name","obj","res","iData","data","i","length","floor"],"mappings":"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","sourcesContent":["'use strict'\r\n\r\nmodule.exports = measure\r\n\r\nmeasure.canvas = document.createElement('canvas')\r\nmeasure.cache = {}\r\n\r\nfunction measure (font, o) {\r\n\tif (!o) o = {}\r\n\r\n\tif (typeof font === 'string' || Array.isArray(font)) {\r\n\t\to.family = font\r\n\t}\r\n\r\n\tvar family = Array.isArray(o.family) ? o.family.join(', ') : o.family\r\n\tif (!family) throw Error('`family` must be defined')\r\n\r\n\tvar fs = o.size || o.fontSize || o.em || 48\r\n\tvar weight = o.weight || o.fontWeight || ''\r\n\tvar style = o.style || o.fontStyle || ''\r\n\tvar font = [style, weight, fs].join(' ') + 'px ' + family\r\n\tvar origin = o.origin || 'top'\r\n\r\n\tif (measure.cache[family]) {\r\n\t\t// return more precise values if cache has them\r\n\t\tif (fs <= measure.cache[family].em) {\r\n\t\t\treturn applyOrigin(measure.cache[family], origin)\r\n\t\t}\r\n\t}\r\n\r\n\tvar canvas = o.canvas || measure.canvas\r\n\tvar ctx = canvas.getContext('2d')\r\n\tvar chars = {\r\n\t\tupper: o.upper !== undefined ? o.upper : 'H',\r\n\t\tlower: o.lower !== undefined ? o.lower : 'x',\r\n\t\tdescent: o.descent !== undefined ? o.descent : 'p',\r\n\t\tascent: o.ascent !== undefined ? o.ascent : 'h',\r\n\t\ttittle: o.tittle !== undefined ? o.tittle : 'i',\r\n\t\tovershoot: o.overshoot !== undefined ? o.overshoot : 'O'\r\n\t}\r\n\tvar l = Math.ceil(fs * 1.5)\r\n\tcanvas.height = l\r\n\tcanvas.width = l * .5\r\n\tctx.font = font\r\n\r\n\tvar char = 'H'\r\n\tvar result = {\r\n\t\ttop: 0\r\n\t}\r\n\r\n\t// measure line-height\r\n\tctx.clearRect(0, 0, l, l)\r\n\tctx.textBaseline = 'top'\r\n\tctx.fillStyle = 'black'\r\n\tctx.fillText(char, 0, 0)\r\n\tvar topPx = firstTop(ctx.getImageData(0, 0, l, l))\r\n\tctx.clearRect(0, 0, l, l)\r\n\tctx.textBaseline = 'bottom'\r\n\tctx.fillText(char, 0, l)\r\n\tvar bottomPx = firstTop(ctx.getImageData(0, 0, l, l))\r\n\tresult.lineHeight =\r\n\tresult.bottom = l - bottomPx + topPx\r\n\r\n\t// measure baseline\r\n\tctx.clearRect(0, 0, l, l)\r\n\tctx.textBaseline = 'alphabetic'\r\n\tctx.fillText(char, 0, l)\r\n\tvar baselinePx = firstTop(ctx.getImageData(0, 0, l, l))\r\n\tvar baseline = l - baselinePx - 1 + topPx\r\n\tresult.baseline =\r\n\tresult.alphabetic = baseline\r\n\r\n\t// measure median\r\n\tctx.clearRect(0, 0, l, l)\r\n\tctx.textBaseline = 'middle'\r\n\tctx.fillText(char, 0, l * .5)\r\n\tvar medianPx = firstTop(ctx.getImageData(0, 0, l, l))\r\n\tresult.median =\r\n\tresult.middle = l - medianPx - 1 + topPx - l * .5\r\n\r\n\t// measure hanging\r\n\tctx.clearRect(0, 0, l, l)\r\n\tctx.textBaseline = 'hanging'\r\n\tctx.fillText(char, 0, l * .5)\r\n\tvar hangingPx = firstTop(ctx.getImageData(0, 0, l, l))\r\n\tresult.hanging = l - hangingPx - 1 + topPx - l * .5\r\n\r\n\t// measure ideographic\r\n\tctx.clearRect(0, 0, l, l)\r\n\tctx.textBaseline = 'ideographic'\r\n\tctx.fillText(char, 0, l)\r\n\tvar ideographicPx = firstTop(ctx.getImageData(0, 0, l, l))\r\n\tresult.ideographic = l - ideographicPx - 1 + topPx\r\n\r\n\t// measure cap\r\n\tif (chars.upper) {\r\n\t\tctx.clearRect(0, 0, l, l)\r\n\t\tctx.textBaseline = 'top'\r\n\t\tctx.fillText(chars.upper, 0, 0)\r\n\t\tresult.upper = firstTop(ctx.getImageData(0, 0, l, l))\r\n\t\tresult.capHeight = (result.baseline - result.upper)\r\n\t}\r\n\r\n\t// measure x\r\n\tif (chars.lower) {\r\n\t\tctx.clearRect(0, 0, l, l)\r\n\t\tctx.textBaseline = 'top'\r\n\t\tctx.fillText(chars.lower, 0, 0)\r\n\t\tresult.lower = firstTop(ctx.getImageData(0, 0, l, l))\r\n\t\tresult.xHeight = (result.baseline - result.lower)\r\n\t}\r\n\r\n\t// measure tittle\r\n\tif (chars.tittle) {\r\n\t\tctx.clearRect(0, 0, l, l)\r\n\t\tctx.textBaseline = 'top'\r\n\t\tctx.fillText(chars.tittle, 0, 0)\r\n\t\tresult.tittle = firstTop(ctx.getImageData(0, 0, l, l))\r\n\t}\r\n\r\n\t// measure ascent\r\n\tif (chars.ascent) {\r\n\t\tctx.clearRect(0, 0, l, l)\r\n\t\tctx.textBaseline = 'top'\r\n\t\tctx.fillText(chars.ascent, 0, 0)\r\n\t\tresult.ascent = firstTop(ctx.getImageData(0, 0, l, l))\r\n\t}\r\n\r\n\t// measure descent\r\n\tif (chars.descent) {\r\n\t\tctx.clearRect(0, 0, l, l)\r\n\t\tctx.textBaseline = 'top'\r\n\t\tctx.fillText(chars.descent, 0, 0)\r\n\t\tresult.descent = firstBottom(ctx.getImageData(0, 0, l, l))\r\n\t}\r\n\r\n\t// measure overshoot\r\n\tif (chars.overshoot) {\r\n\t\tctx.clearRect(0, 0, l, l)\r\n\t\tctx.textBaseline = 'top'\r\n\t\tctx.fillText(chars.overshoot, 0, 0)\r\n\t\tvar overshootPx = firstBottom(ctx.getImageData(0, 0, l, l))\r\n\t\tresult.overshoot = overshootPx - baseline\r\n\t}\r\n\r\n\t// normalize result\r\n\tfor (var name in result) {\r\n\t\tresult[name] /= fs\r\n\t}\r\n\r\n\tresult.em = fs\r\n\tmeasure.cache[family] = result\r\n\r\n\treturn applyOrigin(result, origin)\r\n}\r\n\r\nfunction applyOrigin(obj, origin) {\r\n\tvar res = {}\r\n\tif (typeof origin === 'string') origin = obj[origin]\r\n\tfor (var name in obj) {\r\n\t\tif (name === 'em') continue\r\n\t\tres[name] = obj[name] - origin\r\n\t}\r\n\treturn res\r\n}\r\n\r\nfunction firstTop(iData) {\r\n\tvar l = iData.height\r\n\tvar data = iData.data\r\n\tfor (var i = 3; i < data.length; i+=4) {\r\n\t\tif (data[i] !== 0) {\r\n\t\t\treturn Math.floor((i - 3) *.25 / l)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction firstBottom(iData) {\r\n\tvar l = iData.height\r\n\tvar data = iData.data\r\n\tfor (var i = data.length - 1; i > 0; i -= 4) {\r\n\t\tif (data[i] !== 0) {\r\n\t\t\treturn Math.floor((i - 3) *.25 / l)\r\n\t\t}\r\n\t}\r\n}\r\n"]},"metadata":{},"sourceType":"script"}