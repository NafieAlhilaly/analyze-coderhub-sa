{"ast":null,"code":"'use strict';\n\nvar isNumeric = require('fast-isnumeric');\n\nvar Lib = require('../../lib');\n\nvar attributes = require('./attributes');\n\nvar handleDomainDefaults = require('../../plots/domain').defaults;\n\nvar handleText = require('../bar/defaults').handleText;\n\nfunction handleLabelsAndValues(labels, values) {\n  var hasLabels = Array.isArray(labels);\n  var hasValues = Lib.isArrayOrTypedArray(values);\n  var len = Math.min(hasLabels ? labels.length : Infinity, hasValues ? values.length : Infinity);\n  if (!isFinite(len)) len = 0;\n\n  if (len && hasValues) {\n    var hasPositive;\n\n    for (var i = 0; i < len; i++) {\n      var v = values[i];\n\n      if (isNumeric(v) && v > 0) {\n        hasPositive = true;\n        break;\n      }\n    }\n\n    if (!hasPositive) len = 0;\n  }\n\n  return {\n    hasLabels: hasLabels,\n    hasValues: hasValues,\n    len: len\n  };\n}\n\nfunction supplyDefaults(traceIn, traceOut, defaultColor, layout) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(traceIn, traceOut, attributes, attr, dflt);\n  }\n\n  var labels = coerce('labels');\n  var values = coerce('values');\n  var res = handleLabelsAndValues(labels, values);\n  var len = res.len;\n  traceOut._hasLabels = res.hasLabels;\n  traceOut._hasValues = res.hasValues;\n\n  if (!traceOut._hasLabels && traceOut._hasValues) {\n    coerce('label0');\n    coerce('dlabel');\n  }\n\n  if (!len) {\n    traceOut.visible = false;\n    return;\n  }\n\n  traceOut._length = len;\n  var lineWidth = coerce('marker.line.width');\n  if (lineWidth) coerce('marker.line.color');\n  coerce('marker.colors');\n  coerce('scalegroup'); // TODO: hole needs to be coerced to the same value within a scaleegroup\n\n  var textData = coerce('text');\n  var textTemplate = coerce('texttemplate');\n  var textInfo;\n  if (!textTemplate) textInfo = coerce('textinfo', Array.isArray(textData) ? 'text+percent' : 'percent');\n  coerce('hovertext');\n  coerce('hovertemplate');\n\n  if (textTemplate || textInfo && textInfo !== 'none') {\n    var textposition = coerce('textposition');\n    handleText(traceIn, traceOut, layout, coerce, textposition, {\n      moduleHasSelected: false,\n      moduleHasUnselected: false,\n      moduleHasConstrain: false,\n      moduleHasCliponaxis: false,\n      moduleHasTextangle: false,\n      moduleHasInsideanchor: false\n    });\n    var hasBoth = Array.isArray(textposition) || textposition === 'auto';\n    var hasOutside = hasBoth || textposition === 'outside';\n\n    if (hasOutside) {\n      coerce('automargin');\n    }\n\n    if (textposition === 'inside' || textposition === 'auto' || Array.isArray(textposition)) {\n      coerce('insidetextorientation');\n    }\n  }\n\n  handleDomainDefaults(traceOut, layout, coerce);\n  var hole = coerce('hole');\n  var title = coerce('title.text');\n\n  if (title) {\n    var titlePosition = coerce('title.position', hole ? 'middle center' : 'top center');\n    if (!hole && titlePosition === 'middle center') traceOut.title.position = 'top center';\n    Lib.coerceFont(coerce, 'title.font', layout.font);\n  }\n\n  coerce('sort');\n  coerce('direction');\n  coerce('rotation');\n  coerce('pull');\n}\n\nmodule.exports = {\n  handleLabelsAndValues: handleLabelsAndValues,\n  supplyDefaults: supplyDefaults\n};","map":{"version":3,"sources":["C:/Projects/reactApp/analyse_coderhub/node_modules/plotly.js/src/traces/pie/defaults.js"],"names":["isNumeric","require","Lib","attributes","handleDomainDefaults","defaults","handleText","handleLabelsAndValues","labels","values","hasLabels","Array","isArray","hasValues","isArrayOrTypedArray","len","Math","min","length","Infinity","isFinite","hasPositive","i","v","supplyDefaults","traceIn","traceOut","defaultColor","layout","coerce","attr","dflt","res","_hasLabels","_hasValues","visible","_length","lineWidth","textData","textTemplate","textInfo","textposition","moduleHasSelected","moduleHasUnselected","moduleHasConstrain","moduleHasCliponaxis","moduleHasTextangle","moduleHasInsideanchor","hasBoth","hasOutside","hole","title","titlePosition","position","coerceFont","font","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nvar isNumeric = require('fast-isnumeric');\nvar Lib = require('../../lib');\nvar attributes = require('./attributes');\nvar handleDomainDefaults = require('../../plots/domain').defaults;\nvar handleText = require('../bar/defaults').handleText;\n\nfunction handleLabelsAndValues(labels, values) {\n    var hasLabels = Array.isArray(labels);\n    var hasValues = Lib.isArrayOrTypedArray(values);\n    var len = Math.min(\n        hasLabels ? labels.length : Infinity,\n        hasValues ? values.length : Infinity\n    );\n\n    if(!isFinite(len)) len = 0;\n\n    if(len && hasValues) {\n        var hasPositive;\n        for(var i = 0; i < len; i++) {\n            var v = values[i];\n            if(isNumeric(v) && v > 0) {\n                hasPositive = true;\n                break;\n            }\n        }\n        if(!hasPositive) len = 0;\n    }\n\n    return {\n        hasLabels: hasLabels,\n        hasValues: hasValues,\n        len: len\n    };\n}\n\nfunction supplyDefaults(traceIn, traceOut, defaultColor, layout) {\n    function coerce(attr, dflt) {\n        return Lib.coerce(traceIn, traceOut, attributes, attr, dflt);\n    }\n\n    var labels = coerce('labels');\n    var values = coerce('values');\n\n    var res = handleLabelsAndValues(labels, values);\n    var len = res.len;\n    traceOut._hasLabels = res.hasLabels;\n    traceOut._hasValues = res.hasValues;\n\n    if(!traceOut._hasLabels &&\n        traceOut._hasValues\n    ) {\n        coerce('label0');\n        coerce('dlabel');\n    }\n\n    if(!len) {\n        traceOut.visible = false;\n        return;\n    }\n    traceOut._length = len;\n\n    var lineWidth = coerce('marker.line.width');\n    if(lineWidth) coerce('marker.line.color');\n\n    coerce('marker.colors');\n\n    coerce('scalegroup');\n    // TODO: hole needs to be coerced to the same value within a scaleegroup\n\n    var textData = coerce('text');\n    var textTemplate = coerce('texttemplate');\n    var textInfo;\n    if(!textTemplate) textInfo = coerce('textinfo', Array.isArray(textData) ? 'text+percent' : 'percent');\n\n    coerce('hovertext');\n    coerce('hovertemplate');\n\n    if(textTemplate || (textInfo && textInfo !== 'none')) {\n        var textposition = coerce('textposition');\n        handleText(traceIn, traceOut, layout, coerce, textposition, {\n            moduleHasSelected: false,\n            moduleHasUnselected: false,\n            moduleHasConstrain: false,\n            moduleHasCliponaxis: false,\n            moduleHasTextangle: false,\n            moduleHasInsideanchor: false\n        });\n\n        var hasBoth = Array.isArray(textposition) || textposition === 'auto';\n        var hasOutside = hasBoth || textposition === 'outside';\n        if(hasOutside) {\n            coerce('automargin');\n        }\n\n        if(textposition === 'inside' || textposition === 'auto' || Array.isArray(textposition)) {\n            coerce('insidetextorientation');\n        }\n    }\n\n    handleDomainDefaults(traceOut, layout, coerce);\n\n    var hole = coerce('hole');\n    var title = coerce('title.text');\n    if(title) {\n        var titlePosition = coerce('title.position', hole ? 'middle center' : 'top center');\n        if(!hole && titlePosition === 'middle center') traceOut.title.position = 'top center';\n        Lib.coerceFont(coerce, 'title.font', layout.font);\n    }\n\n    coerce('sort');\n    coerce('direction');\n    coerce('rotation');\n    coerce('pull');\n}\n\nmodule.exports = {\n    handleLabelsAndValues: handleLabelsAndValues,\n    supplyDefaults: supplyDefaults\n};\n"]},"metadata":{},"sourceType":"script"}