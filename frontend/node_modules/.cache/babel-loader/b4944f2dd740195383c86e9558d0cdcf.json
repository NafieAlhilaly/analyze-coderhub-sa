{"ast":null,"code":"'use strict';\n\nmodule.exports = createViewController;\n\nvar createTurntable = require('turntable-camera-controller');\n\nvar createOrbit = require('orbit-camera-controller');\n\nvar createMatrix = require('matrix-camera-controller');\n\nfunction ViewController(controllers, mode) {\n  this._controllerNames = Object.keys(controllers);\n  this._controllerList = this._controllerNames.map(function (n) {\n    return controllers[n];\n  });\n  this._mode = mode;\n  this._active = controllers[mode];\n\n  if (!this._active) {\n    this._mode = 'turntable';\n    this._active = controllers.turntable;\n  }\n\n  this.modes = this._controllerNames;\n  this.computedMatrix = this._active.computedMatrix;\n  this.computedEye = this._active.computedEye;\n  this.computedUp = this._active.computedUp;\n  this.computedCenter = this._active.computedCenter;\n  this.computedRadius = this._active.computedRadius;\n}\n\nvar proto = ViewController.prototype;\n\nproto.flush = function (a0) {\n  var cc = this._controllerList;\n\n  for (var i = 0; i < cc.length; ++i) {\n    cc[i].flush(a0);\n  }\n};\n\nproto.idle = function (a0) {\n  var cc = this._controllerList;\n\n  for (var i = 0; i < cc.length; ++i) {\n    cc[i].idle(a0);\n  }\n};\n\nproto.lookAt = function (a0, a1, a2, a3) {\n  var cc = this._controllerList;\n\n  for (var i = 0; i < cc.length; ++i) {\n    cc[i].lookAt(a0, a1, a2, a3);\n  }\n};\n\nproto.rotate = function (a0, a1, a2, a3) {\n  var cc = this._controllerList;\n\n  for (var i = 0; i < cc.length; ++i) {\n    cc[i].rotate(a0, a1, a2, a3);\n  }\n};\n\nproto.pan = function (a0, a1, a2, a3) {\n  var cc = this._controllerList;\n\n  for (var i = 0; i < cc.length; ++i) {\n    cc[i].pan(a0, a1, a2, a3);\n  }\n};\n\nproto.translate = function (a0, a1, a2, a3) {\n  var cc = this._controllerList;\n\n  for (var i = 0; i < cc.length; ++i) {\n    cc[i].translate(a0, a1, a2, a3);\n  }\n};\n\nproto.setMatrix = function (a0, a1) {\n  var cc = this._controllerList;\n\n  for (var i = 0; i < cc.length; ++i) {\n    cc[i].setMatrix(a0, a1);\n  }\n};\n\nproto.setDistanceLimits = function (a0, a1) {\n  var cc = this._controllerList;\n\n  for (var i = 0; i < cc.length; ++i) {\n    cc[i].setDistanceLimits(a0, a1);\n  }\n};\n\nproto.setDistance = function (a0, a1) {\n  var cc = this._controllerList;\n\n  for (var i = 0; i < cc.length; ++i) {\n    cc[i].setDistance(a0, a1);\n  }\n};\n\nproto.recalcMatrix = function (t) {\n  this._active.recalcMatrix(t);\n};\n\nproto.getDistance = function (t) {\n  return this._active.getDistance(t);\n};\n\nproto.getDistanceLimits = function (out) {\n  return this._active.getDistanceLimits(out);\n};\n\nproto.lastT = function () {\n  return this._active.lastT();\n};\n\nproto.setMode = function (mode) {\n  if (mode === this._mode) {\n    return;\n  }\n\n  var idx = this._controllerNames.indexOf(mode);\n\n  if (idx < 0) {\n    return;\n  }\n\n  var prev = this._active;\n  var next = this._controllerList[idx];\n  var lastT = Math.max(prev.lastT(), next.lastT());\n  prev.recalcMatrix(lastT);\n  next.setMatrix(lastT, prev.computedMatrix);\n  this._active = next;\n  this._mode = mode; //Update matrix properties\n\n  this.computedMatrix = this._active.computedMatrix;\n  this.computedEye = this._active.computedEye;\n  this.computedUp = this._active.computedUp;\n  this.computedCenter = this._active.computedCenter;\n  this.computedRadius = this._active.computedRadius;\n};\n\nproto.getMode = function () {\n  return this._mode;\n};\n\nfunction createViewController(options) {\n  options = options || {};\n  var eye = options.eye || [0, 0, 1];\n  var center = options.center || [0, 0, 0];\n  var up = options.up || [0, 1, 0];\n  var limits = options.distanceLimits || [0, Infinity];\n  var mode = options.mode || 'turntable';\n  var turntable = createTurntable();\n  var orbit = createOrbit();\n  var matrix = createMatrix();\n  turntable.setDistanceLimits(limits[0], limits[1]);\n  turntable.lookAt(0, eye, center, up);\n  orbit.setDistanceLimits(limits[0], limits[1]);\n  orbit.lookAt(0, eye, center, up);\n  matrix.setDistanceLimits(limits[0], limits[1]);\n  matrix.lookAt(0, eye, center, up);\n  return new ViewController({\n    turntable: turntable,\n    orbit: orbit,\n    matrix: matrix\n  }, mode);\n}","map":{"version":3,"sources":["C:/Projects/reactApp/frontend/node_modules/3d-view/view.js"],"names":["module","exports","createViewController","createTurntable","require","createOrbit","createMatrix","ViewController","controllers","mode","_controllerNames","Object","keys","_controllerList","map","n","_mode","_active","turntable","modes","computedMatrix","computedEye","computedUp","computedCenter","computedRadius","proto","prototype","flush","a0","cc","i","length","idle","lookAt","a1","a2","a3","rotate","pan","translate","setMatrix","setDistanceLimits","setDistance","recalcMatrix","t","getDistance","getDistanceLimits","out","lastT","setMode","idx","indexOf","prev","next","Math","max","getMode","options","eye","center","up","limits","distanceLimits","Infinity","orbit","matrix"],"mappings":"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","sourcesContent":["'use strict'\n\nmodule.exports = createViewController\n\nvar createTurntable = require('turntable-camera-controller')\nvar createOrbit     = require('orbit-camera-controller')\nvar createMatrix    = require('matrix-camera-controller')\n\nfunction ViewController(controllers, mode) {\n  this._controllerNames = Object.keys(controllers)\n  this._controllerList = this._controllerNames.map(function(n) {\n    return controllers[n]\n  })\n  this._mode   = mode\n  this._active = controllers[mode]\n  if(!this._active) {\n    this._mode   = 'turntable'\n    this._active = controllers.turntable\n  }\n  this.modes = this._controllerNames\n  this.computedMatrix = this._active.computedMatrix\n  this.computedEye    = this._active.computedEye\n  this.computedUp     = this._active.computedUp\n  this.computedCenter = this._active.computedCenter\n  this.computedRadius = this._active.computedRadius\n}\n\nvar proto = ViewController.prototype\n\nproto.flush = function(a0) {\n  var cc = this._controllerList\n  for (var i = 0; i < cc.length; ++i) {\n    cc[i].flush(a0)\n  }\n}\nproto.idle = function(a0) {\n  var cc = this._controllerList\n  for (var i = 0; i < cc.length; ++i) {\n    cc[i].idle(a0)\n  }\n}\nproto.lookAt = function(a0, a1, a2, a3) {\n  var cc = this._controllerList\n  for (var i = 0; i < cc.length; ++i) {\n    cc[i].lookAt(a0, a1, a2, a3)\n  }\n}\nproto.rotate = function(a0, a1, a2, a3) {\n  var cc = this._controllerList\n  for (var i = 0; i < cc.length; ++i) {\n    cc[i].rotate(a0, a1, a2, a3)\n  }\n}\nproto.pan = function(a0, a1, a2, a3) {\n  var cc = this._controllerList\n  for (var i = 0; i < cc.length; ++i) {\n    cc[i].pan(a0, a1, a2, a3)\n  }\n}\nproto.translate = function(a0, a1, a2, a3) {\n  var cc = this._controllerList\n  for (var i = 0; i < cc.length; ++i) {\n    cc[i].translate(a0, a1, a2, a3)\n  }\n}\nproto.setMatrix = function(a0, a1) {\n  var cc = this._controllerList\n  for (var i = 0; i < cc.length; ++i) {\n    cc[i].setMatrix(a0, a1)\n  }\n}\nproto.setDistanceLimits = function(a0, a1) {\n  var cc = this._controllerList\n  for (var i = 0; i < cc.length; ++i) {\n    cc[i].setDistanceLimits(a0, a1)\n  }\n}\nproto.setDistance = function(a0, a1) {\n  var cc = this._controllerList\n  for (var i = 0; i < cc.length; ++i) {\n    cc[i].setDistance(a0, a1)\n  }\n}\n\nproto.recalcMatrix = function(t) {\n  this._active.recalcMatrix(t)\n}\n\nproto.getDistance = function(t) {\n  return this._active.getDistance(t)\n}\nproto.getDistanceLimits = function(out) {\n  return this._active.getDistanceLimits(out)\n}\n\nproto.lastT = function() {\n  return this._active.lastT()\n}\n\nproto.setMode = function(mode) {\n  if(mode === this._mode) {\n    return\n  }\n  var idx = this._controllerNames.indexOf(mode)\n  if(idx < 0) {\n    return\n  }\n  var prev  = this._active\n  var next  = this._controllerList[idx]\n  var lastT = Math.max(prev.lastT(), next.lastT())\n\n  prev.recalcMatrix(lastT)\n  next.setMatrix(lastT, prev.computedMatrix)\n\n  this._active = next\n  this._mode   = mode\n\n  //Update matrix properties\n  this.computedMatrix = this._active.computedMatrix\n  this.computedEye    = this._active.computedEye\n  this.computedUp     = this._active.computedUp\n  this.computedCenter = this._active.computedCenter\n  this.computedRadius = this._active.computedRadius\n}\n\nproto.getMode = function() {\n  return this._mode\n}\n\nfunction createViewController(options) {\n  options = options || {}\n\n  var eye       = options.eye    || [0,0,1]\n  var center    = options.center || [0,0,0]\n  var up        = options.up     || [0,1,0]\n  var limits    = options.distanceLimits || [0, Infinity]\n  var mode      = options.mode   || 'turntable'\n\n  var turntable = createTurntable()\n  var orbit     = createOrbit()\n  var matrix    = createMatrix()\n\n  turntable.setDistanceLimits(limits[0], limits[1])\n  turntable.lookAt(0, eye, center, up)\n  orbit.setDistanceLimits(limits[0], limits[1])\n  orbit.lookAt(0, eye, center, up)\n  matrix.setDistanceLimits(limits[0], limits[1])\n  matrix.lookAt(0, eye, center, up)\n\n  return new ViewController({\n    turntable: turntable,\n    orbit: orbit,\n    matrix: matrix\n  }, mode)\n}"]},"metadata":{},"sourceType":"script"}