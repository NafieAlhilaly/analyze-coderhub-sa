{"ast":null,"code":"'use strict';\n\nvar Registry = require('../../registry');\n\nvar Lib = require('../../lib');\n\nvar Template = require('../../plot_api/plot_template');\n\nvar attributes = require('./attributes');\n\nvar basePlotLayoutAttributes = require('../../plots/layout_attributes');\n\nvar helpers = require('./helpers');\n\nmodule.exports = function legendDefaults(layoutIn, layoutOut, fullData) {\n  var containerIn = layoutIn.legend || {};\n  var legendTraceCount = 0;\n  var legendReallyHasATrace = false;\n  var defaultOrder = 'normal';\n\n  for (var i = 0; i < fullData.length; i++) {\n    var trace = fullData[i];\n    if (!trace.visible) continue; // Note that we explicitly count any trace that is either shown or\n    // *would* be shown by default, toward the two traces you need to\n    // ensure the legend is shown by default, because this can still help\n    // disambiguate.\n\n    if (trace.showlegend || trace._dfltShowLegend && !(trace._module && trace._module.attributes && trace._module.attributes.showlegend && trace._module.attributes.showlegend.dflt === false)) {\n      legendTraceCount++;\n\n      if (trace.showlegend) {\n        legendReallyHasATrace = true; // Always show the legend by default if there's a pie,\n        // or if there's only one trace but it's explicitly shown\n\n        if (Registry.traceIs(trace, 'pie-like') || trace._input.showlegend === true) {\n          legendTraceCount++;\n        }\n      }\n    }\n\n    if (Registry.traceIs(trace, 'bar') && layoutOut.barmode === 'stack' || ['tonextx', 'tonexty'].indexOf(trace.fill) !== -1) {\n      defaultOrder = helpers.isGrouped({\n        traceorder: defaultOrder\n      }) ? 'grouped+reversed' : 'reversed';\n    }\n\n    if (trace.legendgroup !== undefined && trace.legendgroup !== '') {\n      defaultOrder = helpers.isReversed({\n        traceorder: defaultOrder\n      }) ? 'reversed+grouped' : 'grouped';\n    }\n  }\n\n  var showLegend = Lib.coerce(layoutIn, layoutOut, basePlotLayoutAttributes, 'showlegend', legendReallyHasATrace && legendTraceCount > 1);\n  if (showLegend === false && !containerIn.uirevision) return;\n  var containerOut = Template.newContainer(layoutOut, 'legend');\n\n  function coerce(attr, dflt) {\n    return Lib.coerce(containerIn, containerOut, attributes, attr, dflt);\n  }\n\n  coerce('uirevision', layoutOut.uirevision);\n  if (showLegend === false) return;\n  coerce('bgcolor', layoutOut.paper_bgcolor);\n  coerce('bordercolor');\n  coerce('borderwidth');\n  var itemFont = Lib.coerceFont(coerce, 'font', layoutOut.font);\n  var orientation = coerce('orientation');\n  var isHorizontal = orientation === 'h';\n  var defaultX, defaultY, defaultYAnchor;\n\n  if (isHorizontal) {\n    defaultX = 0;\n\n    if (Registry.getComponentMethod('rangeslider', 'isVisible')(layoutIn.xaxis)) {\n      defaultY = 1.1;\n      defaultYAnchor = 'bottom';\n    } else {\n      // maybe use y=1.1 / yanchor=bottom as above\n      //   to avoid https://github.com/plotly/plotly.js/issues/1199\n      //   in v3\n      defaultY = -0.1;\n      defaultYAnchor = 'top';\n    }\n  } else {\n    defaultX = 1.02;\n    defaultY = 1;\n    defaultYAnchor = 'auto';\n  }\n\n  coerce('traceorder', defaultOrder);\n  if (helpers.isGrouped(layoutOut.legend)) coerce('tracegroupgap');\n  coerce('itemsizing');\n  coerce('itemwidth');\n  coerce('itemclick');\n  coerce('itemdoubleclick');\n  coerce('groupclick');\n  coerce('x', defaultX);\n  coerce('xanchor');\n  coerce('y', defaultY);\n  coerce('yanchor', defaultYAnchor);\n  coerce('valign');\n  Lib.noneOrAll(containerIn, containerOut, ['x', 'y']);\n  var titleText = coerce('title.text');\n\n  if (titleText) {\n    coerce('title.side', isHorizontal ? 'left' : 'top');\n    var dfltTitleFont = Lib.extendFlat({}, itemFont, {\n      size: Lib.bigFont(itemFont.size)\n    });\n    Lib.coerceFont(coerce, 'title.font', dfltTitleFont);\n  }\n};","map":{"version":3,"sources":["C:/Projects/reactApp/analyse_coderhub/node_modules/plotly.js/src/components/legend/defaults.js"],"names":["Registry","require","Lib","Template","attributes","basePlotLayoutAttributes","helpers","module","exports","legendDefaults","layoutIn","layoutOut","fullData","containerIn","legend","legendTraceCount","legendReallyHasATrace","defaultOrder","i","length","trace","visible","showlegend","_dfltShowLegend","_module","dflt","traceIs","_input","barmode","indexOf","fill","isGrouped","traceorder","legendgroup","undefined","isReversed","showLegend","coerce","uirevision","containerOut","newContainer","attr","paper_bgcolor","itemFont","coerceFont","font","orientation","isHorizontal","defaultX","defaultY","defaultYAnchor","getComponentMethod","xaxis","noneOrAll","titleText","dfltTitleFont","extendFlat","size","bigFont"],"mappings":"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","sourcesContent":["'use strict';\n\nvar Registry = require('../../registry');\nvar Lib = require('../../lib');\nvar Template = require('../../plot_api/plot_template');\n\nvar attributes = require('./attributes');\nvar basePlotLayoutAttributes = require('../../plots/layout_attributes');\nvar helpers = require('./helpers');\n\n\nmodule.exports = function legendDefaults(layoutIn, layoutOut, fullData) {\n    var containerIn = layoutIn.legend || {};\n\n    var legendTraceCount = 0;\n    var legendReallyHasATrace = false;\n    var defaultOrder = 'normal';\n\n    for(var i = 0; i < fullData.length; i++) {\n        var trace = fullData[i];\n\n        if(!trace.visible) continue;\n\n        // Note that we explicitly count any trace that is either shown or\n        // *would* be shown by default, toward the two traces you need to\n        // ensure the legend is shown by default, because this can still help\n        // disambiguate.\n        if(trace.showlegend || (\n            trace._dfltShowLegend && !(\n                trace._module &&\n                trace._module.attributes &&\n                trace._module.attributes.showlegend &&\n                trace._module.attributes.showlegend.dflt === false\n            )\n        )) {\n            legendTraceCount++;\n            if(trace.showlegend) {\n                legendReallyHasATrace = true;\n                // Always show the legend by default if there's a pie,\n                // or if there's only one trace but it's explicitly shown\n                if(Registry.traceIs(trace, 'pie-like') ||\n                    trace._input.showlegend === true\n                ) {\n                    legendTraceCount++;\n                }\n            }\n        }\n\n        if((Registry.traceIs(trace, 'bar') && layoutOut.barmode === 'stack') ||\n                ['tonextx', 'tonexty'].indexOf(trace.fill) !== -1) {\n            defaultOrder = helpers.isGrouped({traceorder: defaultOrder}) ?\n                'grouped+reversed' : 'reversed';\n        }\n\n        if(trace.legendgroup !== undefined && trace.legendgroup !== '') {\n            defaultOrder = helpers.isReversed({traceorder: defaultOrder}) ?\n                'reversed+grouped' : 'grouped';\n        }\n    }\n\n    var showLegend = Lib.coerce(layoutIn, layoutOut,\n        basePlotLayoutAttributes, 'showlegend',\n        legendReallyHasATrace && legendTraceCount > 1);\n\n    if(showLegend === false && !containerIn.uirevision) return;\n\n    var containerOut = Template.newContainer(layoutOut, 'legend');\n\n    function coerce(attr, dflt) {\n        return Lib.coerce(containerIn, containerOut, attributes, attr, dflt);\n    }\n\n    coerce('uirevision', layoutOut.uirevision);\n\n    if(showLegend === false) return;\n\n    coerce('bgcolor', layoutOut.paper_bgcolor);\n    coerce('bordercolor');\n    coerce('borderwidth');\n    var itemFont = Lib.coerceFont(coerce, 'font', layoutOut.font);\n\n    var orientation = coerce('orientation');\n    var isHorizontal = orientation === 'h';\n    var defaultX, defaultY, defaultYAnchor;\n\n    if(isHorizontal) {\n        defaultX = 0;\n\n        if(Registry.getComponentMethod('rangeslider', 'isVisible')(layoutIn.xaxis)) {\n            defaultY = 1.1;\n            defaultYAnchor = 'bottom';\n        } else {\n            // maybe use y=1.1 / yanchor=bottom as above\n            //   to avoid https://github.com/plotly/plotly.js/issues/1199\n            //   in v3\n            defaultY = -0.1;\n            defaultYAnchor = 'top';\n        }\n    } else {\n        defaultX = 1.02;\n        defaultY = 1;\n        defaultYAnchor = 'auto';\n    }\n\n    coerce('traceorder', defaultOrder);\n    if(helpers.isGrouped(layoutOut.legend)) coerce('tracegroupgap');\n\n    coerce('itemsizing');\n    coerce('itemwidth');\n\n    coerce('itemclick');\n    coerce('itemdoubleclick');\n    coerce('groupclick');\n\n    coerce('x', defaultX);\n    coerce('xanchor');\n    coerce('y', defaultY);\n    coerce('yanchor', defaultYAnchor);\n    coerce('valign');\n    Lib.noneOrAll(containerIn, containerOut, ['x', 'y']);\n\n    var titleText = coerce('title.text');\n    if(titleText) {\n        coerce('title.side', isHorizontal ? 'left' : 'top');\n        var dfltTitleFont = Lib.extendFlat({}, itemFont, {\n            size: Lib.bigFont(itemFont.size)\n        });\n\n        Lib.coerceFont(coerce, 'title.font', dfltTitleFont);\n    }\n};\n"]},"metadata":{},"sourceType":"script"}