{"ast":null,"code":"'use strict';\n\nvar subTypes = require('../scatter/subtypes');\n\nvar styleTextSelection = require('./edit_style').styleTextSelection;\n\nmodule.exports = function select(searchInfo, selectionTester) {\n  var cd = searchInfo.cd;\n  var xa = searchInfo.xaxis;\n  var ya = searchInfo.yaxis;\n  var selection = [];\n  var trace = cd[0].trace;\n  var stash = cd[0].t;\n  var len = trace._length;\n  var x = stash.x;\n  var y = stash.y;\n  var scene = stash._scene;\n  var index = stash.index;\n  if (!scene) return selection;\n  var hasText = subTypes.hasText(trace);\n  var hasMarkers = subTypes.hasMarkers(trace);\n  var hasOnlyLines = !hasMarkers && !hasText;\n  if (trace.visible !== true || hasOnlyLines) return selection;\n  var els = [];\n  var unels = []; // degenerate polygon does not enable selection\n  // filter out points by visible scatter ones\n\n  if (selectionTester !== false && !selectionTester.degenerate) {\n    for (var i = 0; i < len; i++) {\n      if (selectionTester.contains([stash.xpx[i], stash.ypx[i]], false, i, searchInfo)) {\n        els.push(i);\n        selection.push({\n          pointNumber: i,\n          x: xa.c2d(x[i]),\n          y: ya.c2d(y[i])\n        });\n      } else {\n        unels.push(i);\n      }\n    }\n  }\n\n  if (hasMarkers) {\n    var scatter2d = scene.scatter2d;\n\n    if (!els.length && !unels.length) {\n      // reset to base styles when clearing\n      var baseOpts = new Array(scene.count);\n      baseOpts[index] = scene.markerOptions[index];\n      scatter2d.update.apply(scatter2d, baseOpts);\n    } else if (!scene.selectBatch[index].length && !scene.unselectBatch[index].length) {\n      // set unselected styles on 'context' canvas (if not done already)\n      var unselOpts = new Array(scene.count);\n      unselOpts[index] = scene.markerUnselectedOptions[index];\n      scatter2d.update.apply(scatter2d, unselOpts);\n    }\n  }\n\n  scene.selectBatch[index] = els;\n  scene.unselectBatch[index] = unels;\n\n  if (hasText) {\n    styleTextSelection(cd);\n  }\n\n  return selection;\n};","map":{"version":3,"sources":["C:/Projects/reactApp/frontend/node_modules/plotly.js/src/traces/scattergl/select.js"],"names":["subTypes","require","styleTextSelection","module","exports","select","searchInfo","selectionTester","cd","xa","xaxis","ya","yaxis","selection","trace","stash","t","len","_length","x","y","scene","_scene","index","hasText","hasMarkers","hasOnlyLines","visible","els","unels","degenerate","i","contains","xpx","ypx","push","pointNumber","c2d","scatter2d","length","baseOpts","Array","count","markerOptions","update","apply","selectBatch","unselectBatch","unselOpts","markerUnselectedOptions"],"mappings":"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","sourcesContent":["'use strict';\n\nvar subTypes = require('../scatter/subtypes');\nvar styleTextSelection = require('./edit_style').styleTextSelection;\n\nmodule.exports = function select(searchInfo, selectionTester) {\n    var cd = searchInfo.cd;\n    var xa = searchInfo.xaxis;\n    var ya = searchInfo.yaxis;\n    var selection = [];\n    var trace = cd[0].trace;\n    var stash = cd[0].t;\n    var len = trace._length;\n    var x = stash.x;\n    var y = stash.y;\n    var scene = stash._scene;\n    var index = stash.index;\n\n    if(!scene) return selection;\n\n    var hasText = subTypes.hasText(trace);\n    var hasMarkers = subTypes.hasMarkers(trace);\n    var hasOnlyLines = !hasMarkers && !hasText;\n\n    if(trace.visible !== true || hasOnlyLines) return selection;\n\n    var els = [];\n    var unels = [];\n\n    // degenerate polygon does not enable selection\n    // filter out points by visible scatter ones\n    if(selectionTester !== false && !selectionTester.degenerate) {\n        for(var i = 0; i < len; i++) {\n            if(selectionTester.contains([stash.xpx[i], stash.ypx[i]], false, i, searchInfo)) {\n                els.push(i);\n                selection.push({\n                    pointNumber: i,\n                    x: xa.c2d(x[i]),\n                    y: ya.c2d(y[i])\n                });\n            } else {\n                unels.push(i);\n            }\n        }\n    }\n\n    if(hasMarkers) {\n        var scatter2d = scene.scatter2d;\n\n        if(!els.length && !unels.length) {\n            // reset to base styles when clearing\n            var baseOpts = new Array(scene.count);\n            baseOpts[index] = scene.markerOptions[index];\n            scatter2d.update.apply(scatter2d, baseOpts);\n        } else if(!scene.selectBatch[index].length && !scene.unselectBatch[index].length) {\n            // set unselected styles on 'context' canvas (if not done already)\n            var unselOpts = new Array(scene.count);\n            unselOpts[index] = scene.markerUnselectedOptions[index];\n            scatter2d.update.apply(scatter2d, unselOpts);\n        }\n    }\n\n    scene.selectBatch[index] = els;\n    scene.unselectBatch[index] = unels;\n\n    if(hasText) {\n        styleTextSelection(cd);\n    }\n\n    return selection;\n};\n"]},"metadata":{},"sourceType":"script"}