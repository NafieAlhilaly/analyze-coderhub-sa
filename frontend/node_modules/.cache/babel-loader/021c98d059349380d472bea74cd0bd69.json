{"ast":null,"code":"'use strict';\n\nvar d3 = require('@plotly/d3');\n\nvar Drawing = require('../../components/drawing');\n\nvar heatmapStyle = require('../heatmap/style');\n\nvar makeColorMap = require('./make_color_map');\n\nmodule.exports = function style(gd) {\n  var contours = d3.select(gd).selectAll('g.contour');\n  contours.style('opacity', function (d) {\n    return d[0].trace.opacity;\n  });\n  contours.each(function (d) {\n    var c = d3.select(this);\n    var trace = d[0].trace;\n    var contours = trace.contours;\n    var line = trace.line;\n    var cs = contours.size || 1;\n    var start = contours.start; // for contourcarpet only - is this a constraint-type contour trace?\n\n    var isConstraintType = contours.type === 'constraint';\n    var colorLines = !isConstraintType && contours.coloring === 'lines';\n    var colorFills = !isConstraintType && contours.coloring === 'fill';\n    var colorMap = colorLines || colorFills ? makeColorMap(trace) : null;\n    c.selectAll('g.contourlevel').each(function (d) {\n      d3.select(this).selectAll('path').call(Drawing.lineGroupStyle, line.width, colorLines ? colorMap(d.level) : line.color, line.dash);\n    });\n    var labelFont = contours.labelfont;\n    c.selectAll('g.contourlabels text').each(function (d) {\n      Drawing.font(d3.select(this), {\n        family: labelFont.family,\n        size: labelFont.size,\n        color: labelFont.color || (colorLines ? colorMap(d.level) : line.color)\n      });\n    });\n\n    if (isConstraintType) {\n      c.selectAll('g.contourfill path').style('fill', trace.fillcolor);\n    } else if (colorFills) {\n      var firstFill;\n      c.selectAll('g.contourfill path').style('fill', function (d) {\n        if (firstFill === undefined) firstFill = d.level;\n        return colorMap(d.level + 0.5 * cs);\n      });\n      if (firstFill === undefined) firstFill = start;\n      c.selectAll('g.contourbg path').style('fill', colorMap(firstFill - 0.5 * cs));\n    }\n  });\n  heatmapStyle(gd);\n};","map":{"version":3,"sources":["C:/Projects/reactApp/analyse_coderhub/node_modules/plotly.js/src/traces/contour/style.js"],"names":["d3","require","Drawing","heatmapStyle","makeColorMap","module","exports","style","gd","contours","select","selectAll","d","trace","opacity","each","c","line","cs","size","start","isConstraintType","type","colorLines","coloring","colorFills","colorMap","call","lineGroupStyle","width","level","color","dash","labelFont","labelfont","font","family","fillcolor","firstFill","undefined"],"mappings":"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","sourcesContent":["'use strict';\n\nvar d3 = require('@plotly/d3');\n\nvar Drawing = require('../../components/drawing');\nvar heatmapStyle = require('../heatmap/style');\n\nvar makeColorMap = require('./make_color_map');\n\n\nmodule.exports = function style(gd) {\n    var contours = d3.select(gd).selectAll('g.contour');\n\n    contours.style('opacity', function(d) {\n        return d[0].trace.opacity;\n    });\n\n    contours.each(function(d) {\n        var c = d3.select(this);\n        var trace = d[0].trace;\n        var contours = trace.contours;\n        var line = trace.line;\n        var cs = contours.size || 1;\n        var start = contours.start;\n\n        // for contourcarpet only - is this a constraint-type contour trace?\n        var isConstraintType = contours.type === 'constraint';\n        var colorLines = !isConstraintType && contours.coloring === 'lines';\n        var colorFills = !isConstraintType && contours.coloring === 'fill';\n\n        var colorMap = (colorLines || colorFills) ? makeColorMap(trace) : null;\n\n        c.selectAll('g.contourlevel').each(function(d) {\n            d3.select(this).selectAll('path')\n                .call(Drawing.lineGroupStyle,\n                    line.width,\n                    colorLines ? colorMap(d.level) : line.color,\n                    line.dash);\n        });\n\n        var labelFont = contours.labelfont;\n        c.selectAll('g.contourlabels text').each(function(d) {\n            Drawing.font(d3.select(this), {\n                family: labelFont.family,\n                size: labelFont.size,\n                color: labelFont.color || (colorLines ? colorMap(d.level) : line.color)\n            });\n        });\n\n        if(isConstraintType) {\n            c.selectAll('g.contourfill path')\n                .style('fill', trace.fillcolor);\n        } else if(colorFills) {\n            var firstFill;\n\n            c.selectAll('g.contourfill path')\n                .style('fill', function(d) {\n                    if(firstFill === undefined) firstFill = d.level;\n                    return colorMap(d.level + 0.5 * cs);\n                });\n\n            if(firstFill === undefined) firstFill = start;\n\n            c.selectAll('g.contourbg path')\n                .style('fill', colorMap(firstFill - 0.5 * cs));\n        }\n    });\n\n    heatmapStyle(gd);\n};\n"]},"metadata":{},"sourceType":"script"}