{"ast":null,"code":"'use strict';\n\nvar Registry = require('../../registry');\n\nvar Plots = require('../../plots/plots');\n\nvar axisIds = require('../../plots/cartesian/axis_ids');\n\nvar Icons = require('../../fonts/ploticon');\n\nvar eraseActiveShape = require('../shapes/draw').eraseActiveShape;\n\nvar Lib = require('../../lib');\n\nvar _ = Lib._;\nvar modeBarButtons = module.exports = {};\n/**\n * ModeBar buttons configuration\n *\n * @param {string} name\n *      name / id of the buttons (for tracking)\n * @param {string} title\n *      text that appears while hovering over the button,\n *      enter null, false or '' for no hover text\n * @param {string} icon\n *      svg icon object associated with the button\n *      can be linked to Plotly.Icons to use the default plotly icons\n * @param {string} [gravity]\n *      icon positioning\n * @param {function} click\n *      click handler associated with the button, a function of\n *      'gd' (the main graph object) and\n *      'ev' (the event object)\n * @param {string} [attr]\n *      attribute associated with button,\n *      use this with 'val' to keep track of the state\n * @param {*} [val]\n *      initial 'attr' value, can be a function of gd\n * @param {boolean} [toggle]\n *      is the button a toggle button?\n */\n\nmodeBarButtons.toImage = {\n  name: 'toImage',\n  title: function (gd) {\n    var opts = gd._context.toImageButtonOptions || {};\n    var format = opts.format || 'png';\n    return format === 'png' ? _(gd, 'Download plot as a png') : // legacy text\n    _(gd, 'Download plot'); // generic non-PNG text\n  },\n  icon: Icons.camera,\n  click: function (gd) {\n    var toImageButtonOptions = gd._context.toImageButtonOptions;\n    var opts = {\n      format: toImageButtonOptions.format || 'png'\n    };\n    Lib.notifier(_(gd, 'Taking snapshot - this may take a few seconds'), 'long');\n\n    if (opts.format !== 'svg' && Lib.isIE()) {\n      Lib.notifier(_(gd, 'IE only supports svg.  Changing format to svg.'), 'long');\n      opts.format = 'svg';\n    }\n\n    ['filename', 'width', 'height', 'scale'].forEach(function (key) {\n      if (key in toImageButtonOptions) {\n        opts[key] = toImageButtonOptions[key];\n      }\n    });\n    Registry.call('downloadImage', gd, opts).then(function (filename) {\n      Lib.notifier(_(gd, 'Snapshot succeeded') + ' - ' + filename, 'long');\n    }).catch(function () {\n      Lib.notifier(_(gd, 'Sorry, there was a problem downloading your snapshot!'), 'long');\n    });\n  }\n};\nmodeBarButtons.sendDataToCloud = {\n  name: 'sendDataToCloud',\n  title: function (gd) {\n    return _(gd, 'Edit in Chart Studio');\n  },\n  icon: Icons.disk,\n  click: function (gd) {\n    Plots.sendDataToCloud(gd);\n  }\n};\nmodeBarButtons.editInChartStudio = {\n  name: 'editInChartStudio',\n  title: function (gd) {\n    return _(gd, 'Edit in Chart Studio');\n  },\n  icon: Icons.pencil,\n  click: function (gd) {\n    Plots.sendDataToCloud(gd);\n  }\n};\nmodeBarButtons.zoom2d = {\n  name: 'zoom2d',\n  _cat: 'zoom',\n  title: function (gd) {\n    return _(gd, 'Zoom');\n  },\n  attr: 'dragmode',\n  val: 'zoom',\n  icon: Icons.zoombox,\n  click: handleCartesian\n};\nmodeBarButtons.pan2d = {\n  name: 'pan2d',\n  _cat: 'pan',\n  title: function (gd) {\n    return _(gd, 'Pan');\n  },\n  attr: 'dragmode',\n  val: 'pan',\n  icon: Icons.pan,\n  click: handleCartesian\n};\nmodeBarButtons.select2d = {\n  name: 'select2d',\n  _cat: 'select',\n  title: function (gd) {\n    return _(gd, 'Box Select');\n  },\n  attr: 'dragmode',\n  val: 'select',\n  icon: Icons.selectbox,\n  click: handleCartesian\n};\nmodeBarButtons.lasso2d = {\n  name: 'lasso2d',\n  _cat: 'lasso',\n  title: function (gd) {\n    return _(gd, 'Lasso Select');\n  },\n  attr: 'dragmode',\n  val: 'lasso',\n  icon: Icons.lasso,\n  click: handleCartesian\n};\nmodeBarButtons.drawclosedpath = {\n  name: 'drawclosedpath',\n  title: function (gd) {\n    return _(gd, 'Draw closed freeform');\n  },\n  attr: 'dragmode',\n  val: 'drawclosedpath',\n  icon: Icons.drawclosedpath,\n  click: handleCartesian\n};\nmodeBarButtons.drawopenpath = {\n  name: 'drawopenpath',\n  title: function (gd) {\n    return _(gd, 'Draw open freeform');\n  },\n  attr: 'dragmode',\n  val: 'drawopenpath',\n  icon: Icons.drawopenpath,\n  click: handleCartesian\n};\nmodeBarButtons.drawline = {\n  name: 'drawline',\n  title: function (gd) {\n    return _(gd, 'Draw line');\n  },\n  attr: 'dragmode',\n  val: 'drawline',\n  icon: Icons.drawline,\n  click: handleCartesian\n};\nmodeBarButtons.drawrect = {\n  name: 'drawrect',\n  title: function (gd) {\n    return _(gd, 'Draw rectangle');\n  },\n  attr: 'dragmode',\n  val: 'drawrect',\n  icon: Icons.drawrect,\n  click: handleCartesian\n};\nmodeBarButtons.drawcircle = {\n  name: 'drawcircle',\n  title: function (gd) {\n    return _(gd, 'Draw circle');\n  },\n  attr: 'dragmode',\n  val: 'drawcircle',\n  icon: Icons.drawcircle,\n  click: handleCartesian\n};\nmodeBarButtons.eraseshape = {\n  name: 'eraseshape',\n  title: function (gd) {\n    return _(gd, 'Erase active shape');\n  },\n  icon: Icons.eraseshape,\n  click: eraseActiveShape\n};\nmodeBarButtons.zoomIn2d = {\n  name: 'zoomIn2d',\n  _cat: 'zoomin',\n  title: function (gd) {\n    return _(gd, 'Zoom in');\n  },\n  attr: 'zoom',\n  val: 'in',\n  icon: Icons.zoom_plus,\n  click: handleCartesian\n};\nmodeBarButtons.zoomOut2d = {\n  name: 'zoomOut2d',\n  _cat: 'zoomout',\n  title: function (gd) {\n    return _(gd, 'Zoom out');\n  },\n  attr: 'zoom',\n  val: 'out',\n  icon: Icons.zoom_minus,\n  click: handleCartesian\n};\nmodeBarButtons.autoScale2d = {\n  name: 'autoScale2d',\n  _cat: 'autoscale',\n  title: function (gd) {\n    return _(gd, 'Autoscale');\n  },\n  attr: 'zoom',\n  val: 'auto',\n  icon: Icons.autoscale,\n  click: handleCartesian\n};\nmodeBarButtons.resetScale2d = {\n  name: 'resetScale2d',\n  _cat: 'resetscale',\n  title: function (gd) {\n    return _(gd, 'Reset axes');\n  },\n  attr: 'zoom',\n  val: 'reset',\n  icon: Icons.home,\n  click: handleCartesian\n};\nmodeBarButtons.hoverClosestCartesian = {\n  name: 'hoverClosestCartesian',\n  _cat: 'hoverclosest',\n  title: function (gd) {\n    return _(gd, 'Show closest data on hover');\n  },\n  attr: 'hovermode',\n  val: 'closest',\n  icon: Icons.tooltip_basic,\n  gravity: 'ne',\n  click: handleCartesian\n};\nmodeBarButtons.hoverCompareCartesian = {\n  name: 'hoverCompareCartesian',\n  _cat: 'hoverCompare',\n  title: function (gd) {\n    return _(gd, 'Compare data on hover');\n  },\n  attr: 'hovermode',\n  val: function (gd) {\n    return gd._fullLayout._isHoriz ? 'y' : 'x';\n  },\n  icon: Icons.tooltip_compare,\n  gravity: 'ne',\n  click: handleCartesian\n};\n\nfunction handleCartesian(gd, ev) {\n  var button = ev.currentTarget;\n  var astr = button.getAttribute('data-attr');\n  var val = button.getAttribute('data-val') || true;\n  var fullLayout = gd._fullLayout;\n  var aobj = {};\n  var axList = axisIds.list(gd, null, true);\n  var allSpikesEnabled = fullLayout._cartesianSpikesEnabled;\n  var ax, i;\n\n  if (astr === 'zoom') {\n    var mag = val === 'in' ? 0.5 : 2;\n    var r0 = (1 + mag) / 2;\n    var r1 = (1 - mag) / 2;\n    var axName;\n\n    for (i = 0; i < axList.length; i++) {\n      ax = axList[i];\n\n      if (!ax.fixedrange) {\n        axName = ax._name;\n\n        if (val === 'auto') {\n          aobj[axName + '.autorange'] = true;\n        } else if (val === 'reset') {\n          if (ax._rangeInitial === undefined) {\n            aobj[axName + '.autorange'] = true;\n          } else {\n            var rangeInitial = ax._rangeInitial.slice();\n\n            aobj[axName + '.range[0]'] = rangeInitial[0];\n            aobj[axName + '.range[1]'] = rangeInitial[1];\n          } // N.B. \"reset\" also resets showspikes\n\n\n          if (ax._showSpikeInitial !== undefined) {\n            aobj[axName + '.showspikes'] = ax._showSpikeInitial;\n\n            if (allSpikesEnabled === 'on' && !ax._showSpikeInitial) {\n              allSpikesEnabled = 'off';\n            }\n          }\n        } else {\n          var rangeNow = [ax.r2l(ax.range[0]), ax.r2l(ax.range[1])];\n          var rangeNew = [r0 * rangeNow[0] + r1 * rangeNow[1], r0 * rangeNow[1] + r1 * rangeNow[0]];\n          aobj[axName + '.range[0]'] = ax.l2r(rangeNew[0]);\n          aobj[axName + '.range[1]'] = ax.l2r(rangeNew[1]);\n        }\n      }\n    }\n  } else {\n    // if ALL traces have orientation 'h', 'hovermode': 'x' otherwise: 'y'\n    if (astr === 'hovermode' && (val === 'x' || val === 'y')) {\n      val = fullLayout._isHoriz ? 'y' : 'x';\n      button.setAttribute('data-val', val);\n    }\n\n    aobj[astr] = val;\n  }\n\n  fullLayout._cartesianSpikesEnabled = allSpikesEnabled;\n  Registry.call('_guiRelayout', gd, aobj);\n}\n\nmodeBarButtons.zoom3d = {\n  name: 'zoom3d',\n  _cat: 'zoom',\n  title: function (gd) {\n    return _(gd, 'Zoom');\n  },\n  attr: 'scene.dragmode',\n  val: 'zoom',\n  icon: Icons.zoombox,\n  click: handleDrag3d\n};\nmodeBarButtons.pan3d = {\n  name: 'pan3d',\n  _cat: 'pan',\n  title: function (gd) {\n    return _(gd, 'Pan');\n  },\n  attr: 'scene.dragmode',\n  val: 'pan',\n  icon: Icons.pan,\n  click: handleDrag3d\n};\nmodeBarButtons.orbitRotation = {\n  name: 'orbitRotation',\n  title: function (gd) {\n    return _(gd, 'Orbital rotation');\n  },\n  attr: 'scene.dragmode',\n  val: 'orbit',\n  icon: Icons['3d_rotate'],\n  click: handleDrag3d\n};\nmodeBarButtons.tableRotation = {\n  name: 'tableRotation',\n  title: function (gd) {\n    return _(gd, 'Turntable rotation');\n  },\n  attr: 'scene.dragmode',\n  val: 'turntable',\n  icon: Icons['z-axis'],\n  click: handleDrag3d\n};\n\nfunction handleDrag3d(gd, ev) {\n  var button = ev.currentTarget;\n  var attr = button.getAttribute('data-attr');\n  var val = button.getAttribute('data-val') || true;\n  var sceneIds = gd._fullLayout._subplots.gl3d || [];\n  var layoutUpdate = {};\n  var parts = attr.split('.');\n\n  for (var i = 0; i < sceneIds.length; i++) {\n    layoutUpdate[sceneIds[i] + '.' + parts[1]] = val;\n  } // for multi-type subplots\n\n\n  var val2d = val === 'pan' ? val : 'zoom';\n  layoutUpdate.dragmode = val2d;\n  Registry.call('_guiRelayout', gd, layoutUpdate);\n}\n\nmodeBarButtons.resetCameraDefault3d = {\n  name: 'resetCameraDefault3d',\n  _cat: 'resetCameraDefault',\n  title: function (gd) {\n    return _(gd, 'Reset camera to default');\n  },\n  attr: 'resetDefault',\n  icon: Icons.home,\n  click: handleCamera3d\n};\nmodeBarButtons.resetCameraLastSave3d = {\n  name: 'resetCameraLastSave3d',\n  _cat: 'resetCameraLastSave',\n  title: function (gd) {\n    return _(gd, 'Reset camera to last save');\n  },\n  attr: 'resetLastSave',\n  icon: Icons.movie,\n  click: handleCamera3d\n};\n\nfunction handleCamera3d(gd, ev) {\n  var button = ev.currentTarget;\n  var attr = button.getAttribute('data-attr');\n  var resetLastSave = attr === 'resetLastSave';\n  var resetDefault = attr === 'resetDefault';\n  var fullLayout = gd._fullLayout;\n  var sceneIds = fullLayout._subplots.gl3d || [];\n  var aobj = {};\n\n  for (var i = 0; i < sceneIds.length; i++) {\n    var sceneId = sceneIds[i];\n    var camera = sceneId + '.camera';\n    var aspectratio = sceneId + '.aspectratio';\n    var aspectmode = sceneId + '.aspectmode';\n    var scene = fullLayout[sceneId]._scene;\n    var didUpdate;\n\n    if (resetLastSave) {\n      aobj[camera + '.up'] = scene.viewInitial.up;\n      aobj[camera + '.eye'] = scene.viewInitial.eye;\n      aobj[camera + '.center'] = scene.viewInitial.center;\n      didUpdate = true;\n    } else if (resetDefault) {\n      aobj[camera + '.up'] = null;\n      aobj[camera + '.eye'] = null;\n      aobj[camera + '.center'] = null;\n      didUpdate = true;\n    }\n\n    if (didUpdate) {\n      aobj[aspectratio + '.x'] = scene.viewInitial.aspectratio.x;\n      aobj[aspectratio + '.y'] = scene.viewInitial.aspectratio.y;\n      aobj[aspectratio + '.z'] = scene.viewInitial.aspectratio.z;\n      aobj[aspectmode] = scene.viewInitial.aspectmode;\n    }\n  }\n\n  Registry.call('_guiRelayout', gd, aobj);\n}\n\nmodeBarButtons.hoverClosest3d = {\n  name: 'hoverClosest3d',\n  _cat: 'hoverclosest',\n  title: function (gd) {\n    return _(gd, 'Toggle show closest data on hover');\n  },\n  attr: 'hovermode',\n  val: null,\n  toggle: true,\n  icon: Icons.tooltip_basic,\n  gravity: 'ne',\n  click: handleHover3d\n};\n\nfunction getNextHover3d(gd, ev) {\n  var button = ev.currentTarget;\n  var val = button._previousVal;\n  var fullLayout = gd._fullLayout;\n  var sceneIds = fullLayout._subplots.gl3d || [];\n  var axes = ['xaxis', 'yaxis', 'zaxis']; // initialize 'current spike' object to be stored in the DOM\n\n  var currentSpikes = {};\n  var layoutUpdate = {};\n\n  if (val) {\n    layoutUpdate = val;\n    button._previousVal = null;\n  } else {\n    for (var i = 0; i < sceneIds.length; i++) {\n      var sceneId = sceneIds[i];\n      var sceneLayout = fullLayout[sceneId];\n      var hovermodeAStr = sceneId + '.hovermode';\n      currentSpikes[hovermodeAStr] = sceneLayout.hovermode;\n      layoutUpdate[hovermodeAStr] = false; // copy all the current spike attrs\n\n      for (var j = 0; j < 3; j++) {\n        var axis = axes[j];\n        var spikeAStr = sceneId + '.' + axis + '.showspikes';\n        layoutUpdate[spikeAStr] = false;\n        currentSpikes[spikeAStr] = sceneLayout[axis].showspikes;\n      }\n    }\n\n    button._previousVal = currentSpikes;\n  }\n\n  return layoutUpdate;\n}\n\nfunction handleHover3d(gd, ev) {\n  var layoutUpdate = getNextHover3d(gd, ev);\n  Registry.call('_guiRelayout', gd, layoutUpdate);\n}\n\nmodeBarButtons.zoomInGeo = {\n  name: 'zoomInGeo',\n  _cat: 'zoomin',\n  title: function (gd) {\n    return _(gd, 'Zoom in');\n  },\n  attr: 'zoom',\n  val: 'in',\n  icon: Icons.zoom_plus,\n  click: handleGeo\n};\nmodeBarButtons.zoomOutGeo = {\n  name: 'zoomOutGeo',\n  _cat: 'zoomout',\n  title: function (gd) {\n    return _(gd, 'Zoom out');\n  },\n  attr: 'zoom',\n  val: 'out',\n  icon: Icons.zoom_minus,\n  click: handleGeo\n};\nmodeBarButtons.resetGeo = {\n  name: 'resetGeo',\n  _cat: 'reset',\n  title: function (gd) {\n    return _(gd, 'Reset');\n  },\n  attr: 'reset',\n  val: null,\n  icon: Icons.autoscale,\n  click: handleGeo\n};\nmodeBarButtons.hoverClosestGeo = {\n  name: 'hoverClosestGeo',\n  _cat: 'hoverclosest',\n  title: function (gd) {\n    return _(gd, 'Toggle show closest data on hover');\n  },\n  attr: 'hovermode',\n  val: null,\n  toggle: true,\n  icon: Icons.tooltip_basic,\n  gravity: 'ne',\n  click: toggleHover\n};\n\nfunction handleGeo(gd, ev) {\n  var button = ev.currentTarget;\n  var attr = button.getAttribute('data-attr');\n  var val = button.getAttribute('data-val') || true;\n  var fullLayout = gd._fullLayout;\n  var geoIds = fullLayout._subplots.geo || [];\n\n  for (var i = 0; i < geoIds.length; i++) {\n    var id = geoIds[i];\n    var geoLayout = fullLayout[id];\n\n    if (attr === 'zoom') {\n      var scale = geoLayout.projection.scale;\n      var newScale = val === 'in' ? 2 * scale : 0.5 * scale;\n      Registry.call('_guiRelayout', gd, id + '.projection.scale', newScale);\n    }\n  }\n\n  if (attr === 'reset') {\n    resetView(gd, 'geo');\n  }\n}\n\nmodeBarButtons.hoverClosestGl2d = {\n  name: 'hoverClosestGl2d',\n  _cat: 'hoverclosest',\n  title: function (gd) {\n    return _(gd, 'Toggle show closest data on hover');\n  },\n  attr: 'hovermode',\n  val: null,\n  toggle: true,\n  icon: Icons.tooltip_basic,\n  gravity: 'ne',\n  click: toggleHover\n};\nmodeBarButtons.hoverClosestPie = {\n  name: 'hoverClosestPie',\n  _cat: 'hoverclosest',\n  title: function (gd) {\n    return _(gd, 'Toggle show closest data on hover');\n  },\n  attr: 'hovermode',\n  val: 'closest',\n  icon: Icons.tooltip_basic,\n  gravity: 'ne',\n  click: toggleHover\n};\n\nfunction getNextHover(gd) {\n  var fullLayout = gd._fullLayout;\n  if (fullLayout.hovermode) return false;\n\n  if (fullLayout._has('cartesian')) {\n    return fullLayout._isHoriz ? 'y' : 'x';\n  }\n\n  return 'closest';\n}\n\nfunction toggleHover(gd) {\n  var newHover = getNextHover(gd);\n  Registry.call('_guiRelayout', gd, 'hovermode', newHover);\n}\n\nmodeBarButtons.resetViewSankey = {\n  name: 'resetSankeyGroup',\n  title: function (gd) {\n    return _(gd, 'Reset view');\n  },\n  icon: Icons.home,\n  click: function (gd) {\n    var aObj = {\n      'node.groups': [],\n      'node.x': [],\n      'node.y': []\n    };\n\n    for (var i = 0; i < gd._fullData.length; i++) {\n      var viewInitial = gd._fullData[i]._viewInitial;\n      aObj['node.groups'].push(viewInitial.node.groups.slice());\n      aObj['node.x'].push(viewInitial.node.x.slice());\n      aObj['node.y'].push(viewInitial.node.y.slice());\n    }\n\n    Registry.call('restyle', gd, aObj);\n  }\n}; // buttons when more then one plot types are present\n\nmodeBarButtons.toggleHover = {\n  name: 'toggleHover',\n  title: function (gd) {\n    return _(gd, 'Toggle show closest data on hover');\n  },\n  attr: 'hovermode',\n  val: null,\n  toggle: true,\n  icon: Icons.tooltip_basic,\n  gravity: 'ne',\n  click: function (gd, ev) {\n    var layoutUpdate = getNextHover3d(gd, ev);\n    layoutUpdate.hovermode = getNextHover(gd);\n    Registry.call('_guiRelayout', gd, layoutUpdate);\n  }\n};\nmodeBarButtons.resetViews = {\n  name: 'resetViews',\n  title: function (gd) {\n    return _(gd, 'Reset views');\n  },\n  icon: Icons.home,\n  click: function (gd, ev) {\n    var button = ev.currentTarget;\n    button.setAttribute('data-attr', 'zoom');\n    button.setAttribute('data-val', 'reset');\n    handleCartesian(gd, ev);\n    button.setAttribute('data-attr', 'resetLastSave');\n    handleCamera3d(gd, ev);\n    resetView(gd, 'geo');\n    resetView(gd, 'mapbox');\n  }\n};\nmodeBarButtons.toggleSpikelines = {\n  name: 'toggleSpikelines',\n  title: function (gd) {\n    return _(gd, 'Toggle Spike Lines');\n  },\n  icon: Icons.spikeline,\n  attr: '_cartesianSpikesEnabled',\n  val: 'on',\n  click: function (gd) {\n    var fullLayout = gd._fullLayout;\n    var allSpikesEnabled = fullLayout._cartesianSpikesEnabled;\n    fullLayout._cartesianSpikesEnabled = allSpikesEnabled === 'on' ? 'off' : 'on';\n    Registry.call('_guiRelayout', gd, setSpikelineVisibility(gd));\n  }\n};\n\nfunction setSpikelineVisibility(gd) {\n  var fullLayout = gd._fullLayout;\n  var areSpikesOn = fullLayout._cartesianSpikesEnabled === 'on';\n  var axList = axisIds.list(gd, null, true);\n  var aobj = {};\n\n  for (var i = 0; i < axList.length; i++) {\n    var ax = axList[i];\n    aobj[ax._name + '.showspikes'] = areSpikesOn ? true : ax._showSpikeInitial;\n  }\n\n  return aobj;\n}\n\nmodeBarButtons.resetViewMapbox = {\n  name: 'resetViewMapbox',\n  _cat: 'resetView',\n  title: function (gd) {\n    return _(gd, 'Reset view');\n  },\n  attr: 'reset',\n  icon: Icons.home,\n  click: function (gd) {\n    resetView(gd, 'mapbox');\n  }\n};\nmodeBarButtons.zoomInMapbox = {\n  name: 'zoomInMapbox',\n  _cat: 'zoomin',\n  title: function (gd) {\n    return _(gd, 'Zoom in');\n  },\n  attr: 'zoom',\n  val: 'in',\n  icon: Icons.zoom_plus,\n  click: handleMapboxZoom\n};\nmodeBarButtons.zoomOutMapbox = {\n  name: 'zoomOutMapbox',\n  _cat: 'zoomout',\n  title: function (gd) {\n    return _(gd, 'Zoom out');\n  },\n  attr: 'zoom',\n  val: 'out',\n  icon: Icons.zoom_minus,\n  click: handleMapboxZoom\n};\n\nfunction handleMapboxZoom(gd, ev) {\n  var button = ev.currentTarget;\n  var val = button.getAttribute('data-val');\n  var fullLayout = gd._fullLayout;\n  var subplotIds = fullLayout._subplots.mapbox || [];\n  var scalar = 1.05;\n  var aObj = {};\n\n  for (var i = 0; i < subplotIds.length; i++) {\n    var id = subplotIds[i];\n    var current = fullLayout[id].zoom;\n    var next = val === 'in' ? scalar * current : current / scalar;\n    aObj[id + '.zoom'] = next;\n  }\n\n  Registry.call('_guiRelayout', gd, aObj);\n}\n\nfunction resetView(gd, subplotType) {\n  var fullLayout = gd._fullLayout;\n  var subplotIds = fullLayout._subplots[subplotType] || [];\n  var aObj = {};\n\n  for (var i = 0; i < subplotIds.length; i++) {\n    var id = subplotIds[i];\n    var subplotObj = fullLayout[id]._subplot;\n    var viewInitial = subplotObj.viewInitial;\n    var viewKeys = Object.keys(viewInitial);\n\n    for (var j = 0; j < viewKeys.length; j++) {\n      var key = viewKeys[j];\n      aObj[id + '.' + key] = viewInitial[key];\n    }\n  }\n\n  Registry.call('_guiRelayout', gd, aObj);\n}","map":{"version":3,"sources":["C:/Projects/reactApp/frontend/node_modules/plotly.js/src/components/modebar/buttons.js"],"names":["Registry","require","Plots","axisIds","Icons","eraseActiveShape","Lib","_","modeBarButtons","module","exports","toImage","name","title","gd","opts","_context","toImageButtonOptions","format","icon","camera","click","notifier","isIE","forEach","key","call","then","filename","catch","sendDataToCloud","disk","editInChartStudio","pencil","zoom2d","_cat","attr","val","zoombox","handleCartesian","pan2d","pan","select2d","selectbox","lasso2d","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","eraseshape","zoomIn2d","zoom_plus","zoomOut2d","zoom_minus","autoScale2d","autoscale","resetScale2d","home","hoverClosestCartesian","tooltip_basic","gravity","hoverCompareCartesian","_fullLayout","_isHoriz","tooltip_compare","ev","button","currentTarget","astr","getAttribute","fullLayout","aobj","axList","list","allSpikesEnabled","_cartesianSpikesEnabled","ax","i","mag","r0","r1","axName","length","fixedrange","_name","_rangeInitial","undefined","rangeInitial","slice","_showSpikeInitial","rangeNow","r2l","range","rangeNew","l2r","setAttribute","zoom3d","handleDrag3d","pan3d","orbitRotation","tableRotation","sceneIds","_subplots","gl3d","layoutUpdate","parts","split","val2d","dragmode","resetCameraDefault3d","handleCamera3d","resetCameraLastSave3d","movie","resetLastSave","resetDefault","sceneId","aspectratio","aspectmode","scene","_scene","didUpdate","viewInitial","up","eye","center","x","y","z","hoverClosest3d","toggle","handleHover3d","getNextHover3d","_previousVal","axes","currentSpikes","sceneLayout","hovermodeAStr","hovermode","j","axis","spikeAStr","showspikes","zoomInGeo","handleGeo","zoomOutGeo","resetGeo","hoverClosestGeo","toggleHover","geoIds","geo","id","geoLayout","scale","projection","newScale","resetView","hoverClosestGl2d","hoverClosestPie","getNextHover","_has","newHover","resetViewSankey","aObj","_fullData","_viewInitial","push","node","groups","resetViews","toggleSpikelines","spikeline","setSpikelineVisibility","areSpikesOn","resetViewMapbox","zoomInMapbox","handleMapboxZoom","zoomOutMapbox","subplotIds","mapbox","scalar","current","zoom","next","subplotType","subplotObj","_subplot","viewKeys","Object","keys"],"mappings":"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","sourcesContent":["'use strict';\n\nvar Registry = require('../../registry');\nvar Plots = require('../../plots/plots');\nvar axisIds = require('../../plots/cartesian/axis_ids');\nvar Icons = require('../../fonts/ploticon');\nvar eraseActiveShape = require('../shapes/draw').eraseActiveShape;\nvar Lib = require('../../lib');\nvar _ = Lib._;\n\nvar modeBarButtons = module.exports = {};\n\n/**\n * ModeBar buttons configuration\n *\n * @param {string} name\n *      name / id of the buttons (for tracking)\n * @param {string} title\n *      text that appears while hovering over the button,\n *      enter null, false or '' for no hover text\n * @param {string} icon\n *      svg icon object associated with the button\n *      can be linked to Plotly.Icons to use the default plotly icons\n * @param {string} [gravity]\n *      icon positioning\n * @param {function} click\n *      click handler associated with the button, a function of\n *      'gd' (the main graph object) and\n *      'ev' (the event object)\n * @param {string} [attr]\n *      attribute associated with button,\n *      use this with 'val' to keep track of the state\n * @param {*} [val]\n *      initial 'attr' value, can be a function of gd\n * @param {boolean} [toggle]\n *      is the button a toggle button?\n */\nmodeBarButtons.toImage = {\n    name: 'toImage',\n    title: function(gd) {\n        var opts = gd._context.toImageButtonOptions || {};\n        var format = opts.format || 'png';\n        return format === 'png' ?\n            _(gd, 'Download plot as a png') : // legacy text\n            _(gd, 'Download plot'); // generic non-PNG text\n    },\n    icon: Icons.camera,\n    click: function(gd) {\n        var toImageButtonOptions = gd._context.toImageButtonOptions;\n        var opts = {format: toImageButtonOptions.format || 'png'};\n\n        Lib.notifier(_(gd, 'Taking snapshot - this may take a few seconds'), 'long');\n\n        if(opts.format !== 'svg' && Lib.isIE()) {\n            Lib.notifier(_(gd, 'IE only supports svg.  Changing format to svg.'), 'long');\n            opts.format = 'svg';\n        }\n\n        ['filename', 'width', 'height', 'scale'].forEach(function(key) {\n            if(key in toImageButtonOptions) {\n                opts[key] = toImageButtonOptions[key];\n            }\n        });\n\n        Registry.call('downloadImage', gd, opts)\n          .then(function(filename) {\n              Lib.notifier(_(gd, 'Snapshot succeeded') + ' - ' + filename, 'long');\n          })\n          .catch(function() {\n              Lib.notifier(_(gd, 'Sorry, there was a problem downloading your snapshot!'), 'long');\n          });\n    }\n};\n\nmodeBarButtons.sendDataToCloud = {\n    name: 'sendDataToCloud',\n    title: function(gd) { return _(gd, 'Edit in Chart Studio'); },\n    icon: Icons.disk,\n    click: function(gd) {\n        Plots.sendDataToCloud(gd);\n    }\n};\n\nmodeBarButtons.editInChartStudio = {\n    name: 'editInChartStudio',\n    title: function(gd) { return _(gd, 'Edit in Chart Studio'); },\n    icon: Icons.pencil,\n    click: function(gd) {\n        Plots.sendDataToCloud(gd);\n    }\n};\n\nmodeBarButtons.zoom2d = {\n    name: 'zoom2d',\n    _cat: 'zoom',\n    title: function(gd) { return _(gd, 'Zoom'); },\n    attr: 'dragmode',\n    val: 'zoom',\n    icon: Icons.zoombox,\n    click: handleCartesian\n};\n\nmodeBarButtons.pan2d = {\n    name: 'pan2d',\n    _cat: 'pan',\n    title: function(gd) { return _(gd, 'Pan'); },\n    attr: 'dragmode',\n    val: 'pan',\n    icon: Icons.pan,\n    click: handleCartesian\n};\n\nmodeBarButtons.select2d = {\n    name: 'select2d',\n    _cat: 'select',\n    title: function(gd) { return _(gd, 'Box Select'); },\n    attr: 'dragmode',\n    val: 'select',\n    icon: Icons.selectbox,\n    click: handleCartesian\n};\n\nmodeBarButtons.lasso2d = {\n    name: 'lasso2d',\n    _cat: 'lasso',\n    title: function(gd) { return _(gd, 'Lasso Select'); },\n    attr: 'dragmode',\n    val: 'lasso',\n    icon: Icons.lasso,\n    click: handleCartesian\n};\n\nmodeBarButtons.drawclosedpath = {\n    name: 'drawclosedpath',\n    title: function(gd) { return _(gd, 'Draw closed freeform'); },\n    attr: 'dragmode',\n    val: 'drawclosedpath',\n    icon: Icons.drawclosedpath,\n    click: handleCartesian\n};\n\nmodeBarButtons.drawopenpath = {\n    name: 'drawopenpath',\n    title: function(gd) { return _(gd, 'Draw open freeform'); },\n    attr: 'dragmode',\n    val: 'drawopenpath',\n    icon: Icons.drawopenpath,\n    click: handleCartesian\n};\n\nmodeBarButtons.drawline = {\n    name: 'drawline',\n    title: function(gd) { return _(gd, 'Draw line'); },\n    attr: 'dragmode',\n    val: 'drawline',\n    icon: Icons.drawline,\n    click: handleCartesian\n};\n\nmodeBarButtons.drawrect = {\n    name: 'drawrect',\n    title: function(gd) { return _(gd, 'Draw rectangle'); },\n    attr: 'dragmode',\n    val: 'drawrect',\n    icon: Icons.drawrect,\n    click: handleCartesian\n};\n\nmodeBarButtons.drawcircle = {\n    name: 'drawcircle',\n    title: function(gd) { return _(gd, 'Draw circle'); },\n    attr: 'dragmode',\n    val: 'drawcircle',\n    icon: Icons.drawcircle,\n    click: handleCartesian\n};\n\nmodeBarButtons.eraseshape = {\n    name: 'eraseshape',\n    title: function(gd) { return _(gd, 'Erase active shape'); },\n    icon: Icons.eraseshape,\n    click: eraseActiveShape\n};\n\nmodeBarButtons.zoomIn2d = {\n    name: 'zoomIn2d',\n    _cat: 'zoomin',\n    title: function(gd) { return _(gd, 'Zoom in'); },\n    attr: 'zoom',\n    val: 'in',\n    icon: Icons.zoom_plus,\n    click: handleCartesian\n};\n\nmodeBarButtons.zoomOut2d = {\n    name: 'zoomOut2d',\n    _cat: 'zoomout',\n    title: function(gd) { return _(gd, 'Zoom out'); },\n    attr: 'zoom',\n    val: 'out',\n    icon: Icons.zoom_minus,\n    click: handleCartesian\n};\n\nmodeBarButtons.autoScale2d = {\n    name: 'autoScale2d',\n    _cat: 'autoscale',\n    title: function(gd) { return _(gd, 'Autoscale'); },\n    attr: 'zoom',\n    val: 'auto',\n    icon: Icons.autoscale,\n    click: handleCartesian\n};\n\nmodeBarButtons.resetScale2d = {\n    name: 'resetScale2d',\n    _cat: 'resetscale',\n    title: function(gd) { return _(gd, 'Reset axes'); },\n    attr: 'zoom',\n    val: 'reset',\n    icon: Icons.home,\n    click: handleCartesian\n};\n\nmodeBarButtons.hoverClosestCartesian = {\n    name: 'hoverClosestCartesian',\n    _cat: 'hoverclosest',\n    title: function(gd) { return _(gd, 'Show closest data on hover'); },\n    attr: 'hovermode',\n    val: 'closest',\n    icon: Icons.tooltip_basic,\n    gravity: 'ne',\n    click: handleCartesian\n};\n\nmodeBarButtons.hoverCompareCartesian = {\n    name: 'hoverCompareCartesian',\n    _cat: 'hoverCompare',\n    title: function(gd) { return _(gd, 'Compare data on hover'); },\n    attr: 'hovermode',\n    val: function(gd) {\n        return gd._fullLayout._isHoriz ? 'y' : 'x';\n    },\n    icon: Icons.tooltip_compare,\n    gravity: 'ne',\n    click: handleCartesian\n};\n\nfunction handleCartesian(gd, ev) {\n    var button = ev.currentTarget;\n    var astr = button.getAttribute('data-attr');\n    var val = button.getAttribute('data-val') || true;\n    var fullLayout = gd._fullLayout;\n    var aobj = {};\n    var axList = axisIds.list(gd, null, true);\n    var allSpikesEnabled = fullLayout._cartesianSpikesEnabled;\n\n    var ax, i;\n\n    if(astr === 'zoom') {\n        var mag = (val === 'in') ? 0.5 : 2;\n        var r0 = (1 + mag) / 2;\n        var r1 = (1 - mag) / 2;\n        var axName;\n\n        for(i = 0; i < axList.length; i++) {\n            ax = axList[i];\n\n            if(!ax.fixedrange) {\n                axName = ax._name;\n                if(val === 'auto') {\n                    aobj[axName + '.autorange'] = true;\n                } else if(val === 'reset') {\n                    if(ax._rangeInitial === undefined) {\n                        aobj[axName + '.autorange'] = true;\n                    } else {\n                        var rangeInitial = ax._rangeInitial.slice();\n                        aobj[axName + '.range[0]'] = rangeInitial[0];\n                        aobj[axName + '.range[1]'] = rangeInitial[1];\n                    }\n\n                    // N.B. \"reset\" also resets showspikes\n                    if(ax._showSpikeInitial !== undefined) {\n                        aobj[axName + '.showspikes'] = ax._showSpikeInitial;\n                        if(allSpikesEnabled === 'on' && !ax._showSpikeInitial) {\n                            allSpikesEnabled = 'off';\n                        }\n                    }\n                } else {\n                    var rangeNow = [\n                        ax.r2l(ax.range[0]),\n                        ax.r2l(ax.range[1]),\n                    ];\n\n                    var rangeNew = [\n                        r0 * rangeNow[0] + r1 * rangeNow[1],\n                        r0 * rangeNow[1] + r1 * rangeNow[0]\n                    ];\n\n                    aobj[axName + '.range[0]'] = ax.l2r(rangeNew[0]);\n                    aobj[axName + '.range[1]'] = ax.l2r(rangeNew[1]);\n                }\n            }\n        }\n    } else {\n        // if ALL traces have orientation 'h', 'hovermode': 'x' otherwise: 'y'\n        if(astr === 'hovermode' && (val === 'x' || val === 'y')) {\n            val = fullLayout._isHoriz ? 'y' : 'x';\n            button.setAttribute('data-val', val);\n        }\n\n        aobj[astr] = val;\n    }\n\n    fullLayout._cartesianSpikesEnabled = allSpikesEnabled;\n\n    Registry.call('_guiRelayout', gd, aobj);\n}\n\nmodeBarButtons.zoom3d = {\n    name: 'zoom3d',\n    _cat: 'zoom',\n    title: function(gd) { return _(gd, 'Zoom'); },\n    attr: 'scene.dragmode',\n    val: 'zoom',\n    icon: Icons.zoombox,\n    click: handleDrag3d\n};\n\nmodeBarButtons.pan3d = {\n    name: 'pan3d',\n    _cat: 'pan',\n    title: function(gd) { return _(gd, 'Pan'); },\n    attr: 'scene.dragmode',\n    val: 'pan',\n    icon: Icons.pan,\n    click: handleDrag3d\n};\n\nmodeBarButtons.orbitRotation = {\n    name: 'orbitRotation',\n    title: function(gd) { return _(gd, 'Orbital rotation'); },\n    attr: 'scene.dragmode',\n    val: 'orbit',\n    icon: Icons['3d_rotate'],\n    click: handleDrag3d\n};\n\nmodeBarButtons.tableRotation = {\n    name: 'tableRotation',\n    title: function(gd) { return _(gd, 'Turntable rotation'); },\n    attr: 'scene.dragmode',\n    val: 'turntable',\n    icon: Icons['z-axis'],\n    click: handleDrag3d\n};\n\nfunction handleDrag3d(gd, ev) {\n    var button = ev.currentTarget;\n    var attr = button.getAttribute('data-attr');\n    var val = button.getAttribute('data-val') || true;\n    var sceneIds = gd._fullLayout._subplots.gl3d || [];\n    var layoutUpdate = {};\n\n    var parts = attr.split('.');\n\n    for(var i = 0; i < sceneIds.length; i++) {\n        layoutUpdate[sceneIds[i] + '.' + parts[1]] = val;\n    }\n\n    // for multi-type subplots\n    var val2d = (val === 'pan') ? val : 'zoom';\n    layoutUpdate.dragmode = val2d;\n\n    Registry.call('_guiRelayout', gd, layoutUpdate);\n}\n\nmodeBarButtons.resetCameraDefault3d = {\n    name: 'resetCameraDefault3d',\n    _cat: 'resetCameraDefault',\n    title: function(gd) { return _(gd, 'Reset camera to default'); },\n    attr: 'resetDefault',\n    icon: Icons.home,\n    click: handleCamera3d\n};\n\nmodeBarButtons.resetCameraLastSave3d = {\n    name: 'resetCameraLastSave3d',\n    _cat: 'resetCameraLastSave',\n    title: function(gd) { return _(gd, 'Reset camera to last save'); },\n    attr: 'resetLastSave',\n    icon: Icons.movie,\n    click: handleCamera3d\n};\n\nfunction handleCamera3d(gd, ev) {\n    var button = ev.currentTarget;\n    var attr = button.getAttribute('data-attr');\n    var resetLastSave = attr === 'resetLastSave';\n    var resetDefault = attr === 'resetDefault';\n\n    var fullLayout = gd._fullLayout;\n    var sceneIds = fullLayout._subplots.gl3d || [];\n    var aobj = {};\n\n    for(var i = 0; i < sceneIds.length; i++) {\n        var sceneId = sceneIds[i];\n        var camera = sceneId + '.camera';\n        var aspectratio = sceneId + '.aspectratio';\n        var aspectmode = sceneId + '.aspectmode';\n        var scene = fullLayout[sceneId]._scene;\n        var didUpdate;\n\n        if(resetLastSave) {\n            aobj[camera + '.up'] = scene.viewInitial.up;\n            aobj[camera + '.eye'] = scene.viewInitial.eye;\n            aobj[camera + '.center'] = scene.viewInitial.center;\n            didUpdate = true;\n        } else if(resetDefault) {\n            aobj[camera + '.up'] = null;\n            aobj[camera + '.eye'] = null;\n            aobj[camera + '.center'] = null;\n            didUpdate = true;\n        }\n\n        if(didUpdate) {\n            aobj[aspectratio + '.x'] = scene.viewInitial.aspectratio.x;\n            aobj[aspectratio + '.y'] = scene.viewInitial.aspectratio.y;\n            aobj[aspectratio + '.z'] = scene.viewInitial.aspectratio.z;\n            aobj[aspectmode] = scene.viewInitial.aspectmode;\n        }\n    }\n\n    Registry.call('_guiRelayout', gd, aobj);\n}\n\nmodeBarButtons.hoverClosest3d = {\n    name: 'hoverClosest3d',\n    _cat: 'hoverclosest',\n    title: function(gd) { return _(gd, 'Toggle show closest data on hover'); },\n    attr: 'hovermode',\n    val: null,\n    toggle: true,\n    icon: Icons.tooltip_basic,\n    gravity: 'ne',\n    click: handleHover3d\n};\n\nfunction getNextHover3d(gd, ev) {\n    var button = ev.currentTarget;\n    var val = button._previousVal;\n    var fullLayout = gd._fullLayout;\n    var sceneIds = fullLayout._subplots.gl3d || [];\n\n    var axes = ['xaxis', 'yaxis', 'zaxis'];\n\n    // initialize 'current spike' object to be stored in the DOM\n    var currentSpikes = {};\n    var layoutUpdate = {};\n\n    if(val) {\n        layoutUpdate = val;\n        button._previousVal = null;\n    } else {\n        for(var i = 0; i < sceneIds.length; i++) {\n            var sceneId = sceneIds[i];\n            var sceneLayout = fullLayout[sceneId];\n\n            var hovermodeAStr = sceneId + '.hovermode';\n            currentSpikes[hovermodeAStr] = sceneLayout.hovermode;\n            layoutUpdate[hovermodeAStr] = false;\n\n            // copy all the current spike attrs\n            for(var j = 0; j < 3; j++) {\n                var axis = axes[j];\n                var spikeAStr = sceneId + '.' + axis + '.showspikes';\n                layoutUpdate[spikeAStr] = false;\n                currentSpikes[spikeAStr] = sceneLayout[axis].showspikes;\n            }\n        }\n\n        button._previousVal = currentSpikes;\n    }\n    return layoutUpdate;\n}\n\nfunction handleHover3d(gd, ev) {\n    var layoutUpdate = getNextHover3d(gd, ev);\n    Registry.call('_guiRelayout', gd, layoutUpdate);\n}\n\nmodeBarButtons.zoomInGeo = {\n    name: 'zoomInGeo',\n    _cat: 'zoomin',\n    title: function(gd) { return _(gd, 'Zoom in'); },\n    attr: 'zoom',\n    val: 'in',\n    icon: Icons.zoom_plus,\n    click: handleGeo\n};\n\nmodeBarButtons.zoomOutGeo = {\n    name: 'zoomOutGeo',\n    _cat: 'zoomout',\n    title: function(gd) { return _(gd, 'Zoom out'); },\n    attr: 'zoom',\n    val: 'out',\n    icon: Icons.zoom_minus,\n    click: handleGeo\n};\n\nmodeBarButtons.resetGeo = {\n    name: 'resetGeo',\n    _cat: 'reset',\n    title: function(gd) { return _(gd, 'Reset'); },\n    attr: 'reset',\n    val: null,\n    icon: Icons.autoscale,\n    click: handleGeo\n};\n\nmodeBarButtons.hoverClosestGeo = {\n    name: 'hoverClosestGeo',\n    _cat: 'hoverclosest',\n    title: function(gd) { return _(gd, 'Toggle show closest data on hover'); },\n    attr: 'hovermode',\n    val: null,\n    toggle: true,\n    icon: Icons.tooltip_basic,\n    gravity: 'ne',\n    click: toggleHover\n};\n\nfunction handleGeo(gd, ev) {\n    var button = ev.currentTarget;\n    var attr = button.getAttribute('data-attr');\n    var val = button.getAttribute('data-val') || true;\n    var fullLayout = gd._fullLayout;\n    var geoIds = fullLayout._subplots.geo || [];\n\n    for(var i = 0; i < geoIds.length; i++) {\n        var id = geoIds[i];\n        var geoLayout = fullLayout[id];\n\n        if(attr === 'zoom') {\n            var scale = geoLayout.projection.scale;\n            var newScale = (val === 'in') ? 2 * scale : 0.5 * scale;\n\n            Registry.call('_guiRelayout', gd, id + '.projection.scale', newScale);\n        }\n    }\n\n    if(attr === 'reset') {\n        resetView(gd, 'geo');\n    }\n}\n\nmodeBarButtons.hoverClosestGl2d = {\n    name: 'hoverClosestGl2d',\n    _cat: 'hoverclosest',\n    title: function(gd) { return _(gd, 'Toggle show closest data on hover'); },\n    attr: 'hovermode',\n    val: null,\n    toggle: true,\n    icon: Icons.tooltip_basic,\n    gravity: 'ne',\n    click: toggleHover\n};\n\nmodeBarButtons.hoverClosestPie = {\n    name: 'hoverClosestPie',\n    _cat: 'hoverclosest',\n    title: function(gd) { return _(gd, 'Toggle show closest data on hover'); },\n    attr: 'hovermode',\n    val: 'closest',\n    icon: Icons.tooltip_basic,\n    gravity: 'ne',\n    click: toggleHover\n};\n\nfunction getNextHover(gd) {\n    var fullLayout = gd._fullLayout;\n\n    if(fullLayout.hovermode) return false;\n\n    if(fullLayout._has('cartesian')) {\n        return fullLayout._isHoriz ? 'y' : 'x';\n    }\n    return 'closest';\n}\n\nfunction toggleHover(gd) {\n    var newHover = getNextHover(gd);\n    Registry.call('_guiRelayout', gd, 'hovermode', newHover);\n}\n\nmodeBarButtons.resetViewSankey = {\n    name: 'resetSankeyGroup',\n    title: function(gd) { return _(gd, 'Reset view'); },\n    icon: Icons.home,\n    click: function(gd) {\n        var aObj = {\n            'node.groups': [],\n            'node.x': [],\n            'node.y': []\n        };\n        for(var i = 0; i < gd._fullData.length; i++) {\n            var viewInitial = gd._fullData[i]._viewInitial;\n            aObj['node.groups'].push(viewInitial.node.groups.slice());\n            aObj['node.x'].push(viewInitial.node.x.slice());\n            aObj['node.y'].push(viewInitial.node.y.slice());\n        }\n        Registry.call('restyle', gd, aObj);\n    }\n};\n\n// buttons when more then one plot types are present\n\nmodeBarButtons.toggleHover = {\n    name: 'toggleHover',\n    title: function(gd) { return _(gd, 'Toggle show closest data on hover'); },\n    attr: 'hovermode',\n    val: null,\n    toggle: true,\n    icon: Icons.tooltip_basic,\n    gravity: 'ne',\n    click: function(gd, ev) {\n        var layoutUpdate = getNextHover3d(gd, ev);\n        layoutUpdate.hovermode = getNextHover(gd);\n\n        Registry.call('_guiRelayout', gd, layoutUpdate);\n    }\n};\n\nmodeBarButtons.resetViews = {\n    name: 'resetViews',\n    title: function(gd) { return _(gd, 'Reset views'); },\n    icon: Icons.home,\n    click: function(gd, ev) {\n        var button = ev.currentTarget;\n\n        button.setAttribute('data-attr', 'zoom');\n        button.setAttribute('data-val', 'reset');\n        handleCartesian(gd, ev);\n\n        button.setAttribute('data-attr', 'resetLastSave');\n        handleCamera3d(gd, ev);\n\n        resetView(gd, 'geo');\n        resetView(gd, 'mapbox');\n    }\n};\n\nmodeBarButtons.toggleSpikelines = {\n    name: 'toggleSpikelines',\n    title: function(gd) { return _(gd, 'Toggle Spike Lines'); },\n    icon: Icons.spikeline,\n    attr: '_cartesianSpikesEnabled',\n    val: 'on',\n    click: function(gd) {\n        var fullLayout = gd._fullLayout;\n        var allSpikesEnabled = fullLayout._cartesianSpikesEnabled;\n\n        fullLayout._cartesianSpikesEnabled = allSpikesEnabled === 'on' ? 'off' : 'on';\n        Registry.call('_guiRelayout', gd, setSpikelineVisibility(gd));\n    }\n};\n\nfunction setSpikelineVisibility(gd) {\n    var fullLayout = gd._fullLayout;\n    var areSpikesOn = fullLayout._cartesianSpikesEnabled === 'on';\n    var axList = axisIds.list(gd, null, true);\n    var aobj = {};\n\n    for(var i = 0; i < axList.length; i++) {\n        var ax = axList[i];\n        aobj[ax._name + '.showspikes'] = areSpikesOn ? true : ax._showSpikeInitial;\n    }\n\n    return aobj;\n}\n\nmodeBarButtons.resetViewMapbox = {\n    name: 'resetViewMapbox',\n    _cat: 'resetView',\n    title: function(gd) { return _(gd, 'Reset view'); },\n    attr: 'reset',\n    icon: Icons.home,\n    click: function(gd) {\n        resetView(gd, 'mapbox');\n    }\n};\n\nmodeBarButtons.zoomInMapbox = {\n    name: 'zoomInMapbox',\n    _cat: 'zoomin',\n    title: function(gd) { return _(gd, 'Zoom in'); },\n    attr: 'zoom',\n    val: 'in',\n    icon: Icons.zoom_plus,\n    click: handleMapboxZoom\n};\n\nmodeBarButtons.zoomOutMapbox = {\n    name: 'zoomOutMapbox',\n    _cat: 'zoomout',\n    title: function(gd) { return _(gd, 'Zoom out'); },\n    attr: 'zoom',\n    val: 'out',\n    icon: Icons.zoom_minus,\n    click: handleMapboxZoom\n};\n\nfunction handleMapboxZoom(gd, ev) {\n    var button = ev.currentTarget;\n    var val = button.getAttribute('data-val');\n    var fullLayout = gd._fullLayout;\n    var subplotIds = fullLayout._subplots.mapbox || [];\n    var scalar = 1.05;\n    var aObj = {};\n\n    for(var i = 0; i < subplotIds.length; i++) {\n        var id = subplotIds[i];\n        var current = fullLayout[id].zoom;\n        var next = (val === 'in') ? scalar * current : current / scalar;\n        aObj[id + '.zoom'] = next;\n    }\n\n    Registry.call('_guiRelayout', gd, aObj);\n}\n\nfunction resetView(gd, subplotType) {\n    var fullLayout = gd._fullLayout;\n    var subplotIds = fullLayout._subplots[subplotType] || [];\n    var aObj = {};\n\n    for(var i = 0; i < subplotIds.length; i++) {\n        var id = subplotIds[i];\n        var subplotObj = fullLayout[id]._subplot;\n        var viewInitial = subplotObj.viewInitial;\n        var viewKeys = Object.keys(viewInitial);\n\n        for(var j = 0; j < viewKeys.length; j++) {\n            var key = viewKeys[j];\n            aObj[id + '.' + key] = viewInitial[key];\n        }\n    }\n\n    Registry.call('_guiRelayout', gd, aObj);\n}\n"]},"metadata":{},"sourceType":"script"}